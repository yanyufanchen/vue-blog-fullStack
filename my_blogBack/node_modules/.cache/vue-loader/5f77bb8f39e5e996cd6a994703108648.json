{"remainingRequest":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\components\\Me\\About_me.vue?vue&type=style&index=0&id=31303fc1&lang=less&scoped=true&","dependencies":[{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\components\\Me\\About_me.vue","mtime":1590508018235},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\less-loader\\dist\\cjs.js","mtime":1576755764101},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.about_me {\r\n  .header {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    .title {\r\n      margin-right: 36px;\r\n      font-size: 15px;\r\n      color: #333;\r\n    }\r\n    .img {\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n  .from {\r\n    .line {\r\n      text-align: center;\r\n    }\r\n  }\r\n  .saying {\r\n    .title {}\r\n    .tag {\r\n      \r\n    }\r\n  }\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n",{"version":3,"sources":["About_me.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"About_me.vue","sourceRoot":"src/components/Me","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 导航 -->\r\n    <Breadcrumb :value=\"common\"></Breadcrumb>\r\n    <el-card class=\"about_me\">\r\n      <div class=\"header\">\r\n        <span class=\"title\">头像：</span>\r\n        <el-avatar class=\"img\"\r\n                   :size=\"100\"\r\n                   :src=\"fileList.length>0?fileList[0].url:circleUrl\"></el-avatar>\r\n        <div class=\"uploadImg\">\r\n          <el-upload ref=\"upload\"\r\n                     class=\"upload-demo\"\r\n                     action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n                     :on-preview=\"handlePreview\"\r\n                     :on-remove=\"handleRemove\"\r\n                     :before-remove=\"beforeRemove\"\r\n                     :on-change=\"progressImg\"\r\n                     :file-list=\"fileList\"\r\n                     :auto-upload=\"false\"\r\n                     :limit=\"uploadImgNum\"\r\n                     list-type=\"picture\">\r\n            <el-button slot=\"trigger\"\r\n                       size=\"small\"\r\n                       type=\"primary\">{{fileList.length>0?'替换头像':'选择头像'}}</el-button>\r\n            <el-button style=\"margin-left: 10px;\"\r\n                       size=\"small\"\r\n                       type=\"success\"\r\n                       @click=\"submitUpload\">确定上传</el-button>\r\n            <div slot=\"tip\"\r\n                 class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n          </el-upload>\r\n        </div>\r\n      </div>\r\n      <div class=\"from\"\r\n           style=\"width:500px;margin-top:30px;\">\r\n        <el-form :label-position=\"labelPosition\"\r\n                 label-width=\"80px\"\r\n                 :rules=\"rules\"\r\n                 ref=\"ruleForm\"\r\n                 :model=\"ruleForm\">\r\n          <el-form-item label=\"昵称\"\r\n                        prop=\"name\">\r\n            <el-input v-model=\"ruleForm.name\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"出生日期\"\r\n                        required>\r\n            <el-col :span=\"11\">\r\n              <el-form-item prop=\"date1\">\r\n                <el-date-picker type=\"date\"\r\n                                placeholder=\"选择日期\"\r\n                                v-model=\"ruleForm.date1\"\r\n                                :default-value=\"ruleForm.date1\"\r\n                                format=\"yyyy-MM-dd\"\r\n                                value-format=\"yyyy-MM-dd\"\r\n                                style=\"width: 100%;\"></el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col class=\"line\"\r\n                    :span=\"2\">-</el-col>\r\n            <el-col :span=\"11\">\r\n              <el-form-item prop=\"date2\">\r\n                <el-time-picker placeholder=\"选择时间\"\r\n                                v-model=\"ruleForm.date2\"\r\n                                :default-value=\"ruleForm.date2\"\r\n                                format=\"HH:mm:ss\"\r\n                                value-format=\"HH:mm:ss\"\r\n                                style=\"width: 100%;\"></el-time-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item label=\"性别\"\r\n                        prop=\"six\">\r\n            <el-select v-model=\"ruleForm.six\"\r\n                       placeholder=\"请选择\">\r\n              <el-option label=\"男\"\r\n                         value=\"0\"></el-option>\r\n              <el-option label=\"女\"\r\n                         value=\"1\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"简介\"\r\n                        prop=\"intro\">\r\n            <el-input type=\"textarea\"\r\n                      v-model=\"ruleForm.intro\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\"\r\n                       @click=\"submitForm('ruleForm')\">立即保存</el-button>\r\n            <!-- <el-button @click=\"resetForm('ruleForm')\">重置</el-button> -->\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div class=\"saying\">\r\n        <div class=\"title\">我的语录</div>\r\n        <div class=\"tag\">\r\n          <el-table :data=\"me_info\"\r\n                    style=\"width: 100%\">\r\n            <el-table-column label=\"日期\"\r\n                             width=\"180\">\r\n              <template slot-scope=\"scope\">\r\n                <i class=\"el-icon-time\"></i>\r\n                <span style=\"margin-left: 10px\">{{ scope.row.createdAt | moment('YYYY-MM:DD hh:mm:ss') }}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"语录\"\r\n                             width=\"300\">\r\n              <template slot-scope=\"scope\">\r\n                <div slot=\"reference\"\r\n                     class=\"name-wrapper\">\r\n                  <el-tag size=\"medium\">{{ scope.row.message }}</el-tag>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button size=\"mini\"\r\n                           @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n                <el-button size=\"mini\"\r\n                           type=\"danger\"\r\n                           @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport moment from 'moment' // 时间过滤插件\r\nimport { aboutMeMessageApi, aboutMeinformationApi } from '@/api'\r\nexport default {\r\n  data () {\r\n    return {\r\n      pickerOptions0: {\r\n        disabledDate (time) {\r\n          return time.getTime() < Date.now()//如果没有后面的-8.64e7就是不可以选择今天的\r\n        }\r\n      },\r\n      common: ['基本信息'], // 公共组件传值\r\n      circleUrl: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\",\r\n      fileList: [], // 上传头像\r\n      uploadImgNum: 1, // 允许上传数量\r\n      notImg: 'https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png',\r\n      labelPosition: 'left',\r\n      // 基本信息表单\r\n      ruleForm: {\r\n        name: '',\r\n        date1: '',\r\n        date2: '',\r\n        six: '',\r\n        intro: ''\r\n      },\r\n      // 基本信息表单验证\r\n      rules: {\r\n        name: [\r\n          { required: true, message: '请输入昵称', trigger: 'blur' },\r\n          { min: 2, max: 10, message: '长度在 3 到 10 个字符', trigger: 'blur' }\r\n        ],\r\n        date1: [\r\n          { type: 'string', required: true, message: '请选择日期', trigger: 'change' }\r\n        ],\r\n        date2: [\r\n          { type: 'string', required: true, message: '请选择时间', trigger: 'change' }\r\n        ],\r\n        six: [\r\n          { required: true, message: '请选择性别', trigger: 'change' }\r\n        ],\r\n        intro: [\r\n          { required: true, message: '请填写简介', trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 语录\r\n\r\n      me_info: []\r\n    }\r\n  },\r\n  created () {\r\n    this.getdata()\r\n  },\r\n\r\n  methods: {\r\n    // 提交基本信息表单\r\n    submitForm (formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          //  alert('submit!')\r\n          console.log(this.ruleForm, '保存表单');\r\n\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false;\r\n        }\r\n      })\r\n    },\r\n\r\n    submitUpload () {\r\n      console.log('确定上传');\r\n      this.$refs.upload.submit();\r\n    },\r\n    handleRemove (file, fileList) {\r\n      console.log(file, fileList);\r\n      console.log(this.fileList, 111);\r\n    },\r\n    handlePreview (file) {\r\n      console.log(file);\r\n    },\r\n    beforeRemove (file, fileList) {\r\n      return this.$confirm(`确定移除 ${file.name}？`);\r\n    },\r\n    progressImg (file, fileList) {\r\n      console.log(file, fileList, 222)\r\n\r\n    },\r\n\r\n    // 编辑语录\r\n    handleEdit (index, row) {\r\n      console.log(index, row);\r\n    },\r\n    // 删除语录\r\n    handleDelete (index, row) {\r\n      console.log(index, row);\r\n    },\r\n    // 新增语录\r\n\r\n    // 获取数据\r\n    getdata () {\r\n      // 获取about_me_message\r\n      this.getMe_messageAll()\r\n      this.getMe_DetailAll()\r\n    },\r\n    // 获取about_me_message\r\n    async getMe_messageAll () {\r\n      const { data: res } = await aboutMeMessageApi()\r\n      console.log(res, '查询服务器-我的语录')\r\n      if (res.statu !== 200) return this.$message.error(res.mes)\r\n      // res.data.forEach\r\n      this.me_info = res.data\r\n    },\r\n    // 获取about_me_详细信息\r\n    async getMe_DetailAll () {\r\n      const { data: res } = await aboutMeinformationApi()\r\n      console.log(res, '查询服务器-我的详细信息')\r\n      if (res.statu !== 200) return this.$message.error(res.mes)\r\n      this.ruleForm.name = res.data[0].nickname\r\n      this.ruleForm.six = res.data[0].six == 0 ? '男' : '女'\r\n      console.log(res.data[0].birthday, 111);\r\n      let time = new Date(res.data[0].birthday).getTime()\r\n      let date1 = this.VTime.formatTime(time, 'Y-M-D')\r\n      let date2 = this.VTime.formatTime(time, 'h:m:s')\r\n      // this.ruleForm.data1 = date1\r\n      // this.ruleForm.data2 = date2\r\n      this.$set(this.ruleForm, 'date1', date1)\r\n      this.$set(this.ruleForm, 'date2', date2)\r\n      this.ruleForm.intro = res.data[0].intro\r\n      console.log(this.ruleForm);\r\n\r\n      // res.data.forEach(item => {\r\n      //   item.message = item.message.split(';')\r\n      // })\r\n      // this.message.capacity = res.data\r\n      // console.log(this.message.capacity)\r\n    },\r\n\r\n\r\n\r\n  },\r\n  mounted () { }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.about_me {\r\n  .header {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    .title {\r\n      margin-right: 36px;\r\n      font-size: 15px;\r\n      color: #333;\r\n    }\r\n    .img {\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n  .from {\r\n    .line {\r\n      text-align: center;\r\n    }\r\n  }\r\n  .saying {\r\n    .title {}\r\n    .tag {\r\n      \r\n    }\r\n  }\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n</style>\r\n"]}]}