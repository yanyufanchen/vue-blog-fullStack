{"remainingRequest":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\components\\userManage\\userManage.vue?vue&type=style&index=0&id=66c6f40f&lang=less&scoped=true&","dependencies":[{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\components\\userManage\\userManage.vue","mtime":1583411151465},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\less-loader\\dist\\cjs.js","mtime":1576755764101},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.item {\r\n  margin-top: 10px;\r\n  margin-right: 40px;\r\n}\r\n.checking{\r\n  margin: 20px 0;\r\n  .codeName{\r\n    width: 12.5rem;margin-right: 10px;\r\n  }\r\n  .add{float: right;}\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n",{"version":3,"sources":["userManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userManage.vue","sourceRoot":"src/components/userManage","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!-- 导航 -->\r\n\t\t<Breadcrumb :value=\"common\"></Breadcrumb>\r\n\t\t<el-card class=\"box-card\">\r\n\t\t\t<el-row class=\"checking\">\r\n\t\t\t\t<el-col :span=\"20\">\r\n\t\t\t\t\t<div class=\"grid-content bg-purple\">\r\n\t\t\t\t\t\t<span class=\"com_title\">Administrator name：</span>\r\n\t\t\t\t\t\t<el-input\r\n\t\t\t\t\t\t\tclass=\"codeName\"\r\n\t\t\t\t\t\t\tref=\"com_name\"\r\n\t\t\t\t\t\t\tplaceholder=\"Please enter administrator name\"\r\n\t\t\t\t\t\t\tv-model=\"input1\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t@clear=\"clear\"\r\n\t\t\t\t\t\t></el-input>\r\n\t\t\t\t\t\t<el-button type=\"info\" size=\"small\" @click=\"searchClick\">Query</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t<div class=\"grid-content bg-purple-light\">\r\n\t\t\t\t\t\t<el-button\r\n\t\t\t\t\t\t\ttype=\"info\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t@click=\"dialogFormVisible = true\"\r\n\t\t\t\t\t\t\tclass=\"add\"\r\n\t\t\t\t\t\t>Add administrator</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t\t<el-table :data=\"tableData\" style=\"width: 100%\">\r\n\t\t\t\t<el-table-column prop=\"username\" label=\"Administrator name\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"password\" label=\"Administrator password\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"isSuper\" label=\"Administrator\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"Operation\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button\r\n\t\t\t\t\t\t\tv-if=\"scope.row.isSuper !='Super Admin' \"\r\n\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\t@click=\"handleEdit(scope.$index, scope.row)\"\r\n\t\t\t\t\t\t>Edit</el-button>\r\n\t\t\t\t\t\t<el-button\r\n\t\t\t\t\t\t\tv-if=\"scope.row.isSuper !='Super Admin'\"\r\n\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\ttype=\"danger\"\r\n\t\t\t\t\t\t\t@click=\"handleDelete(scope.$index, scope.row)\"\r\n\t\t\t\t\t\t>Delete</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<el-dialog title=\"add Admin\" :visible.sync=\"dialogFormVisible\">\r\n\t\t\t\t\r\n\t\t\t\t<!-- <el-form :model=\"addForm\" :rules=\"rulesRegion\" ref=\"addForm\"> -->\r\n\t\t\t\t<el-form :model=\"addForm\" :rules=\"rulesRegion\" ref=\"addForm\">\r\n\t\t\t\t\t<el-form-item  label=\"username\" prop=\"username\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t<el-input v-model=\"addForm.username\" autocomplete=\"off\" clearable></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"password\" prop=\"password\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t<el-input v-model=\"addForm.password\" autocomplete=\"off\" clearable></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button size=\"small\" @click=\"dialogFormVisible = false\">cancel</el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"info\" @click=\"submitForm('addForm')\">confirm</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</el-dialog>\r\n\t\t\t<el-dialog title=\"edit\" :visible.sync=\"editFormVisible\">\r\n\t\t\t\t<el-form :model=\"editRegion\"  ref=\"editRegion\">\r\n\t\t\t\t\t<el-form-item :rules=\"rulesRegion1\" label=\"password111\" prop=\"validator\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t<el-input v-model=\"editRegion.password\" autocomplete=\"off\" clearable></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button size=\"small\" @click.native=\"editFormVisible = false\">cancel</el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"info\" @click=\"editSubmitRegion('editRegion')\">confirm</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</el-dialog>\r\n\t\t</el-card>\r\n\t</div>\r\n</template>\r\n<script>\r\n  import { allLogin_api, getLogin_api,addLogin_api,editLogin_api,deleteLogin_api } from '@/api'\r\n  import moment from 'moment' // 时间过滤插件\r\nexport default {\r\n  data() {\r\n    return {\r\n      common: ['System setup'], //公共组件传值\r\n      input1:'',\r\n      value1:'',\r\n      tableData: [],\r\n      dialogFormVisible:false,\r\n      editFormVisible:false,\r\n      addForm:{\r\n\t\t\tusername:'',\r\n\t\t\tpassword:'',\r\n\t\t},\r\n\t\teditRegion: {\r\n\t\t\tpassword:''\r\n\t\t},\r\n\t\tformLabelWidth:'140px',\r\n\t\trulesRegion:{\r\n\t\t\tusername:[{required:true,message:'Please input username',trigger:'blur'}],\r\n\t\t\tpassword:[{required:true,message:'Please input password',trigger:'blur'}]\r\n\t\t},\r\n\t\trulesRegion1: {\r\n\t\t\tvalidator: (rule,value,callback)=>{\r\n\t\t\t\tconsole.log(value,this.editRegion.password,111);\r\n\t\t\t\tif(this.editRegion.password.length<=10){\r\n\t\t\t\t\treturn callback('请输入正确密码')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n  },\r\n  created() {\r\n    this.getLoginAll()\r\n  },\r\n  methods: {\r\n\t    // 清除clearInput\r\n    clear(){\r\n      this.show = true;\r\n        this.getLoginAll()\r\n    },\r\n\t  async getLoginAll() {\r\n\t    const { data: res } = await allLogin_api()\r\n\t    if (res.status !== 200) return this.$message.error(res.msg)\r\n      for(var i in res.data){\r\n        if(res.data[i].isSuper == 1){\r\n          res.data[i].isSuper = 'Super Admin'\r\n        }else{\r\n          res.data[i].isSuper = 'Admin'\r\n        }\r\n      }\r\n\t    this.tableData = res.data\r\n\t  },\r\n\t  //add\r\n\t  submitForm(formName){\r\n\t      var that = this\r\n\t  \tthis.$refs[formName].validate((valid) =>{\r\n\t  \t\tif(valid){\r\n\r\n\t  \t\t\tvar params ={\r\n            \"username\":that.addForm.username,\r\n            \"password\":that.addForm.password\r\n          }\r\n\t  \t\t\tthis.$confirm('Whether to commit',{\r\n\t  \t\t\t\tconfirmButtonText:'confirm',\r\n\t  \t\t\t\tcancelButtonText:'cancel',\r\n\t  \t\t\t\ttype:'warning',\r\n\t  \t\t\t\tcenter:true\r\n\t  \t\t\t})\r\n\t  \t\t\t.then(function(){\r\n\t  \t\t\t\t//ajax\r\n\t  \t\t\t\taddLogin_api(params).then(res =>{\r\n\t  \t\t\t\t\tif(res.status == 200){ //此处的表单验证\r\n\t  \t\t\t\t\t\tthat.dialogFormVisible = false\r\n\t  \t\t\t\t\t\tthat.getLoginAll() //重新渲染数据\r\n\t  \t\t\t\t\t}else{\r\n\t  \t\t\t\t\tthat.$confirm(res.result.msg, 'hint', {\r\n\t                    type: 'warning'\r\n\t               \t})\r\n\t  \t\t\t\t}\r\n\t  \t\t\t\t}).catch(err =>{console.log(err)})\r\n\t  \t\t\t})\r\n\t  \t\t\t.catch(function(err){\r\n\t  \t\t\t\tconsole.log('Cancel')\r\n\t  \t\t\t})\r\n\t  \t\t} else {\r\n\t  \t\t\treturn false\r\n\t  \t\t}\r\n\t  \t})\r\n\t  },\r\n\t  //edit\r\n\t  handleEdit(index, row) {\r\n\t      this.editFormVisible = true;\r\n\t      this.editRegion = Object.assign({id:row.id,password:row.password}); //这句是关键！！！\r\n\t  },\r\n\t  editSubmitRegion (formName) {\r\n\t  \tvar that = this\r\n\t  \tthis.$refs[formName].validate((valid) =>{\r\n\t  \t\tif(valid){\r\n\t  \t\tvar params = that.editRegion\r\n\t  \t\t\tthis.$confirm('Whether to commit',{\r\n\t  \t\t\t\tconfirmButtonText:'confirm',\r\n\t  \t\t\t\tcancelButtonText:'cancel',\r\n\t  \t\t\t\ttype:'warning',\r\n\t  \t\t\t\tcenter:true\r\n\t  \t\t\t})\r\n\t  \t\t\t.then(function(){\r\n\t  \t\t\t\t//ajax\r\n\t  \t\t\t\teditLogin_api(params).then(res =>{\r\n\t  \t\t\t\t\tif(res.status == 200){\r\n\t  \t\t\t\t\t\tthat.editFormVisible = false\r\n\t  \t\t\t\t\t\tthat.getLoginAll() //重新渲染数据\r\n\t  \t\t\t\t\t}else{\r\n\t  \t\t\t\t\t\tthat.$confirm(res.result.msg, 'hint', {\r\n\t                    type: 'warning'\r\n\t               \t})\r\n\t  \t\t\t\t\t}\r\n\t  \t\t\t\t}).catch(err =>{console.log(err)})\r\n\t  \t\t\t})\r\n\t  \t\t\t.catch(function(err){\r\n\t  \t\t\t\tconsole.log('Cancel')\r\n\t  \t\t\t})\r\n\t  \t\t} else {\r\n\t  \t\t\treturn false\r\n\t  \t\t}\r\n\t  \t})\r\n\t  },\r\n\t  //query\r\n\t  searchClick(){ // 查询功能\r\n\t  \t//获取当前页面的信息，发送给后台 刷新页面\r\n\t  \tconst nameCom = this.input1; //管理员名称\r\n      if(nameCom == ''){\r\n        this.getLoginAll()\r\n      }else{\r\n        var  params = {\r\n          \"username\": nameCom,\r\n        }\r\n        getLogin_api(params).then(res => {\r\n          if (res.data.status !== 200) {\r\n            return this.$message.error(res.data.msg)\r\n          } else {\r\n            if(res.data.data.isSuper == 1){\r\n              res.data.data.isSuper = 'Super Admin'\r\n            }else{\r\n              res.data.data.isSuper = 'Admin'\r\n            }\r\n            var arr = []\r\n            arr.push(res.data.data)\r\n            this.tableData = arr\r\n          }\r\n        })\r\n      }\r\n\r\n\t  },\r\n\t  //delete\r\n\t  handleDelete (index,row) {\r\n\t      var _self = this;\r\n\t      this.$confirm('Are you sure to delete?', 'hint', {\r\n\t          confirmButtonText:'delete',\r\n\t  \t\t\t  cancelButtonText:'waiting',\r\n\t  \t\t\t  type:'warning',\r\n\t  \t\t\t  center:true\r\n\t  \t\t\t\t  }).then(function(){\r\n\t  \t\t\t\t\tlet params = {\r\n\t  \t\t\t\t\t\tLoginId:row.id\r\n\t  \t\t\t\t\t}\r\n\t  \t\t\t\t\tdeleteLogin_api({data:params}).then(res => {\r\n\t  \t\t\t\t\t\tif(res.status == 200){\r\n\t  \t\t\t\t\t\t\t_self.$message({\r\n\t  \t\t\t\t\t\t\t  message: 'successfully delete',\r\n\t  \t\t\t\t\t\t\t  type: 'success'\r\n\t  \t\t\t\t\t\t  });\r\n\t  \t\t\t\t\t_self.getLoginAll() //重新渲染数据\r\n\t  \t\t\t\t\t\t}\r\n\t  \t\t\t\t\t}).catch(err =>{console.log(err)})\r\n\t  \t\t\t\t  }).catch(function(e){\r\n\t  \t\t\t\t\t  if(e != \"cancel\")\r\n\t  \t\t\t\t\t\t  console.log(\"error:\" + e);\r\n\t  \t\t\t\t  });\r\n\t  \t\t  },\r\n  },\r\n  mounted() {}\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.item {\r\n  margin-top: 10px;\r\n  margin-right: 40px;\r\n}\r\n.checking{\r\n  margin: 20px 0;\r\n  .codeName{\r\n    width: 12.5rem;margin-right: 10px;\r\n  }\r\n  .add{float: right;}\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n</style>\r\n"]}]}