{"remainingRequest":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\src\\components\\Book\\BookReservation.vue?vue&type=style&index=0&id=884c10e6&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\src\\components\\Book\\BookReservation.vue","mtime":1577495608314},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\less-loader\\dist\\cjs.js","mtime":1576755764101},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.item {\r\n  margin-top: 10px;\r\n  margin-right: 40px;\r\n}\r\n.checking{\r\n  margin: 20px 0;\r\n  .codeName{\r\n    width: 12.5rem;margin-right: 10px;\r\n  }\r\n  .add{float: right;}\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n",{"version":3,"sources":["BookReservation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookReservation.vue","sourceRoot":"src/components/Book","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 导航 -->\r\n    <Breadcrumb :value=\"common\"></Breadcrumb>\r\n    <el-card class=\"box-card\">\r\n\t\t\t<!-- //信息统计 -->\r\n       Book Reservation\r\n    </el-card>\r\n    <el-row class=\"checking\">\r\n      <el-col :span=\"18\"><div class=\"grid-content bg-purple\">\r\n      <span class=\"com_title\">Appointments：</span><el-input\r\n      \tclass='codeName'\r\n      \tref='com_name'\r\n      \tplaceholder=\"Please enter Appointments\"\r\n      \tv-model=\"input1\"\r\n        size=\"small\"\r\n      \tclearable>\r\n      </el-input>\r\n      <span class=\"com_title\">title name：</span><el-input\r\n      \tclass='codeName'\r\n      \tref='com_name'\r\n      \tplaceholder=\"Please enter title name\"\r\n      \tv-model=\"value1\"\r\n        size=\"small\"\r\n      \tclearable>\r\n      </el-input>\r\n      <el-button type=\"primary\" size=\"small\" @click='searchClick'>Query</el-button>\r\n      </div></el-col>\r\n      <el-col :span=\"6\"><div class=\"grid-content bg-purple-light\">\r\n        <el-button type=\"primary\" size=\"small\" @click='dialogFormVisible = true' class=\"add\">Add administrator</el-button>\r\n      </div></el-col>\r\n    </el-row>\r\n    <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%\">\r\n      <el-table-column\r\n        prop=\"id\"\r\n        label=\"Order\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"name\"\r\n        label=\"Appointments\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"title\"\r\n        label=\"TitleName\">\r\n      </el-table-column>\r\n      <el-table-column label=\"Operation\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                size=\"mini\"\r\n                @click=\"handleEdit(scope.$index, scope.row)\">Edit</el-button>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"handleDelete(scope.$index, scope.row)\">Delete</el-button>\r\n            </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog title=\"添加预约\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form :model=\"addForm\" :rules='rules' ref='addForm'>\r\n      \t<el-form-item label=\"预约姓名\" prop='name' :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"addForm.name\" autocomplete=\"off\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"预约书名\" prop='title' :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"addForm.title\" autocomplete=\"off\" clearable></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button size=\"small\" type=\"primary\" @click=\"submitForm('addForm')\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n      <el-dialog title=\"编辑预约\" :visible.sync=\"editFormVisible\">\r\n        <el-form :model=\"editRegion\" :rules='rules' ref='editRegion'>\r\n        \t<el-form-item label=\"预约姓名\" prop='name' :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"editRegion.name\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"预约书名\" prop='title' :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"editRegion.title\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button size=\"small\" @click.native=\"editFormVisible = false\">取 消</el-button>\r\n          <el-button size=\"small\" type=\"primary\" @click=\"editSubmitRegion('editRegion')\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { allReservation_api, getReservation_api,addReservation_api,editReservation_api,deleteReservation_api  } from '@/api'\r\nexport default {\r\n  data() {\r\n    return {\r\n      common: [' Book Reservation'], //公共组件传值\r\n      input1:'',\r\n      value1:'',\r\n      tableData: [],\r\n      dialogFormVisible:false,\r\n      editFormVisible: false,\r\n      addForm: {\r\n      \ttitle: '',\r\n      \tname: ''\r\n      },\r\n      editRegion: {\r\n      \ttitle: '',\r\n      \tname: ''\r\n      },\r\n      formLabelWidth: '140px',\r\n      rules: {\r\n      \ttitle: [{ required: true, message: '请填写编号', trigger: 'blur' },\r\n            { type: 'string',\r\n              pattern: /^[0-9]{1,22}$/, // 正则表达式验证\r\n              message: '请输入数字编号！',\r\n              trigger: 'blur'\r\n            }],\r\n      \tname: [{ required: true, message: '请填写作者', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getReservationAll()\r\n  },\r\n  methods: {\r\n    async getReservationAll() {\r\n\r\n      const { data: res } = await allReservation_api()\r\n      console.log(res)\r\n      if (res.status !== 200) return this.$message.error(res.msg)\r\n    \t// console.log(res)\r\n      this.tableData = res.data\r\n    },\r\n    //query 查询\r\n    searchClick(){\r\n       const nameCom = this.input1 // 姓名\r\n       const cardCom = this.value1 // 编号\r\n\r\n       if(nameCom == '' && cardCom == ''){\r\n         this.show = true;\r\n         this.getReservationAll()\r\n       }else{\r\n         var  params = {\r\n           \"name\": nameCom,\r\n           \"title\": cardCom\r\n         }\r\n         getReservation_api(params).then(res => {\r\n           if (res.data.status !== 200) {\r\n             return this.$message.error(res.data.msg)\r\n           } else {\r\n             // res.data.data.createdAt = moment(res.data.data.createdAt).format('YYYY-MM-DD')\r\n             var arr = []\r\n             arr.push(res.data.data)\r\n             this.tableData = arr\r\n           }\r\n         })\r\n       }\r\n    },\r\n    // edit\r\n    handleEdit(index, row) {\r\n        this.editFormVisible = true\r\n        this.editRegion = Object.assign({id:row.id}, row) // 这句是关键！！！\r\n    },\r\n    editSubmitRegion (formName) {\r\n    \tvar that = this\r\n    \tthis.$refs[formName].validate((valid) => {\r\n    \t\tif (valid) {\r\n    \t\tvar params ={\r\n          \"id\":that.editRegion.id,\r\n    \t\t  \"name\": that.editRegion.name,\r\n    \t\t  \"title\":that.editRegion.title,\r\n    \t\t}\r\n        console.log(params)\r\n    \t\t\tthis.$confirm('是否确认提交',{\r\n    \t\t\t\tconfirmButtonText:'确定',\r\n    \t\t\t\tcancelButtonText:'取消',\r\n    \t\t\t\ttype:'warning',\r\n    \t\t\t\tcenter:true\r\n    \t\t\t})\r\n    \t\t\t.then(function(){\r\n    \t\t\t\t//ajax\r\n    \t\t\t\teditReservation_api(params).then(res =>{\r\n              console.log(res.data.status)\r\n    \t\t\t\t\tif(res.status === 200){\r\n    \t\t\t\t\t\tthat.editFormVisible = false\r\n    \t\t\t\t\t\tthat.getReservationAll() //重新渲染数据\r\n    \t\t\t\t\t}else if(res.result.status == 2){\r\n    \t\t\t\t\t\tthat.$confirm(res.result.msg, '提示', {\r\n                      type: 'warning'\r\n                 \t})\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}).catch(err =>{console.log(err)})\r\n    \t\t\t})\r\n    \t\t\t.catch(function(err){\r\n    \t\t\t\tconsole.log('Cancel')\r\n    \t\t\t})\r\n    \t\t} else {\r\n    \t\t\treturn false\r\n    \t\t}\r\n    \t})\r\n    },\r\n    //add 添加\r\n    submitForm(formName){\r\n        var that = this\r\n    \tthis.$refs[formName].validate((valid) =>{\r\n    \t\tif(valid){\r\n    \t\t\tvar params ={\r\n            \"name\": that.addForm.name,\r\n            \"title\":that.addForm.title,\r\n          }\r\n    \t\t\tthis.$confirm('是否确认提交',{\r\n    \t\t\t\tconfirmButtonText:'确定',\r\n    \t\t\t\tcancelButtonText:'取消',\r\n    \t\t\t\ttype:'warning',\r\n    \t\t\t\tcenter:true\r\n    \t\t\t})\r\n    \t\t\t.then(function(){\r\n    \t\t\t\t//ajax\r\n    \t\t\t\taddReservation_api(params).then(res =>{\r\n    \t\t\t\t\tif(res.status === 200){ //此处的表单验证\r\n    \t\t\t\t\t\tthat.dialogFormVisible = false\r\n    \t\t\t\t\t\tthat.getReservationAll() //重新渲染数据\r\n    \t\t\t\t\t}else{\r\n    \t\t\t\t\tthat.$confirm(res.result.msg, '提示', {\r\n                      type: 'warning'\r\n                 \t})\r\n    \t\t\t\t}\r\n    \t\t\t\t}).catch(err =>{console.log(err)})\r\n    \t\t\t})\r\n    \t\t\t.catch(function(err){\r\n    \t\t\t\tconsole.log('Cancel')\r\n    \t\t\t})\r\n    \t\t} else {\r\n    \t\t\treturn false\r\n    \t\t}\r\n    \t})\r\n    },\r\n\r\n    // delete\r\n    handleDelete (index, row) {\r\n        var _self = this\r\n        this.$confirm('确认删除吗? 删除之后,数据将不可恢复,请慎重选择！', '提示', {\r\n            confirmButtonText: '删除',\r\n            cancelButtonText: '我再想一下',\r\n            type: 'warning',\r\n            center: true\r\n              }).then(function() {\r\n            let params = {\r\n              ReserId:row.id\r\n            }\r\n        deleteReservation_api({data:params}).then(res => {\r\n        \tif(res.status == 200){\r\n        \t\t_self.$message({\r\n        \t\t  message: '删除成功',\r\n        \t\t  type: 'success'\r\n        \t  });\r\n        _self.getReservationAll() //重新渲染数据\r\n        \t}\r\n        }).catch(err =>{console.log(err)})\r\n    \t\t  }).catch(function(e) {\r\n    \t\t\t  if (e != 'cancel') { console.log('出现错误：' + e) }\r\n    \t\t  })\r\n      }\r\n  },\r\n  mounted() {\r\n\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.item {\r\n  margin-top: 10px;\r\n  margin-right: 40px;\r\n}\r\n.checking{\r\n  margin: 20px 0;\r\n  .codeName{\r\n    width: 12.5rem;margin-right: 10px;\r\n  }\r\n  .add{float: right;}\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n</style>\r\n"]}]}