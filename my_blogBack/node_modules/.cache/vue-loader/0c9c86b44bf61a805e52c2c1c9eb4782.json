{"remainingRequest":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\my_project\\my_library\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\my_project\\my_library\\src\\components\\orders\\Orders.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\my_project\\my_library\\src\\components\\orders\\Orders.vue","mtime":1565521202776},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\my_project\\my_library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\my_project\\my_library\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\my_project\\my_library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\my_project\\my_library\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { ordersList_api, ordersPany_api } from '@/api'\r\nimport cityData from './citydata'\r\nexport default {\r\n  data() {\r\n    return {\r\n      common: ['订单管理', '订单列表'], //公共组件传值\r\n      orderfrom: {\r\n        query: '',\r\n        pagenum: 1,\r\n        pagesize: 10\r\n      },\r\n      //   表单数据\r\n      tableData: [],\r\n      total: 0,\r\n      //   修改地址\r\n    //   selectedKeys: [],\r\n      sideVisible: false,\r\n      options: cityData,\r\n      addressForm:{\r\n          selectedKeys:[],\r\n          side:''\r\n      },\r\n    //   验证地址栏对话框\r\n      addressFormRules:{\r\n          side: [{ required: true, message: '地址不能为空' }]\r\n      },\r\n      //   物流对话框\r\n      ordersVisible: false,\r\n      reverse: true,\r\n      activities: []\r\n    }\r\n  },\r\n  created() {\r\n    this.getordersList()\r\n  },\r\n  methods: {\r\n    async getordersList() {\r\n      const { data: res } = await ordersList_api(this.orderfrom)\r\n      if (res.meta.status !== 200) return this.$message.error('获取订单列表失败')\r\n      this.$message.success('获取订单列表成功')\r\n      this.tableData = res.data.goods\r\n      this.total = res.data.total\r\n    },\r\n    handleSizeChange(val) {\r\n      this.orderfrom.pagesize = val\r\n      this.getordersList()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.orderfrom.pagenum = val\r\n      this.getordersList()\r\n    },\r\n    // 点击打开修改地址对话框\r\n    openSide() {\r\n      this.sideVisible = true\r\n    },\r\n    // 地址对话框选中地址后\r\n    handleChange(val) {\r\n        // console.log(val);\r\n        this.addressForm.side=val.join('')\r\n    },\r\n    // 重置对话框\r\n    emptyAddress(){\r\n       this.addressForm.selectedKeys=[]\r\n        this.$refs.OrderSideFormRef.resetFields()\r\n    },\r\n    // 关闭地址对话框\r\n    addressClose(){\r\n        this.addressForm.selectedKeys=[]\r\n        this.$refs.OrderSideFormRef.resetFields()\r\n        this.sideVisible = false\r\n    },\r\n    // 点击打开物流信息对话框\r\n    async openOrders() {\r\n      const { data: res } = await ordersPany_api()\r\n      // console.log(res);\r\n      if (res.meta.status != 200) return this.$message.error('获取物流信息失败')\r\n      this.$message.success('获取物流信息成功')\r\n      console.log(res.data)\r\n      this.activities = res.data\r\n      this.ordersVisible = true\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["Orders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Orders.vue","sourceRoot":"src/components/orders","sourcesContent":["<!--  -->\r\n<template>\r\n  <div>\r\n    <Breadcrumb :value=\"common\"></Breadcrumb>\r\n    <el-card class=\"box-card\">\r\n      <el-table :data=\"tableData\" stripe style=\"width: 100%\" border>\r\n        <el-table-column type=\"index\" label=\"#\" width=\"80\"></el-table-column>\r\n        <el-table-column prop=\"order_number\" label=\"订单编号\" width=\"180\"></el-table-column>\r\n        <el-table-column prop=\"order_price\" label=\"订单价格\"></el-table-column>\r\n        <el-table-column prop=\"order_pay\" label=\"是否付款\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag type=\"danger\" v-if=\"scope.row.order_pay==='0'\">未付款</el-tag>\r\n            <el-tag type=\"success\" v-else>已付款</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"is_send\" label=\"是否发货\"></el-table-column>\r\n        <el-table-column prop=\"create_time\" label=\"下单时间\">\r\n          <template slot-scope=\"scope\">{{scope.row.update_time | moment}}</template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"address\" label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <!-- 修改按钮 -->\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"openSide\"></el-button>\r\n            <!-- 物流按钮 -->\r\n            <el-button type=\"success\" icon=\"el-icon-s-promotion\" size=\"mini\" @click=\"openOrders\"></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- //分页 -->\r\n      <el-pagination\r\n        background\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"orderfrom.pagenum\"\r\n        :page-sizes=\"[2, 5, 10, 20]\"\r\n        :page-size=\"orderfrom.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      ></el-pagination>\r\n    </el-card>\r\n    <!-- 修改地址对话框 -->\r\n    <el-dialog title=\"修改地址\" :visible.sync=\"sideVisible\" width=\"50%\" :before-close=\"addressClose\">\r\n      <el-form ref=\"OrderSideFormRef\" label-width=\"110px\" :model=\"addressForm\" :rules=\"addressFormRules\">\r\n        <!-- 多级分类信息 -->\r\n        <el-form-item label=\"选择商品分类：\">\r\n          <el-cascader\r\n            style=\"width:20%\"\r\n            clearable\r\n            v-model=\"addressForm.selectedKeys\"\r\n            :options=\"options\"\r\n            :props=\"{ \r\n              expandTrigger: 'hover',\r\n              value:'value',\r\n              label:'label',\r\n                children:'children'\r\n               }\"\r\n            @change=\"handleChange\"\r\n          ></el-cascader>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"收货地址:\"\r\n          prop=\"side\"\r\n        >\r\n          <el-input  v-model=\"addressForm.side\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" >提交</el-button>\r\n          <el-button @click=\"emptyAddress\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n    <!-- 物流对话框 -->\r\n    <el-dialog title=\"物流进度\" :visible.sync=\"ordersVisible\" width=\"50%\">\r\n      <el-timeline :reverse=\"reverse\">\r\n        <el-timeline-item\r\n          v-for=\"(activity, index) in activities\"\r\n          :key=\"index\"\r\n          :timestamp=\"activity.time\"\r\n        >{{activity.context}}</el-timeline-item>\r\n      </el-timeline>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { ordersList_api, ordersPany_api } from '@/api'\r\nimport cityData from './citydata'\r\nexport default {\r\n  data() {\r\n    return {\r\n      common: ['订单管理', '订单列表'], //公共组件传值\r\n      orderfrom: {\r\n        query: '',\r\n        pagenum: 1,\r\n        pagesize: 10\r\n      },\r\n      //   表单数据\r\n      tableData: [],\r\n      total: 0,\r\n      //   修改地址\r\n    //   selectedKeys: [],\r\n      sideVisible: false,\r\n      options: cityData,\r\n      addressForm:{\r\n          selectedKeys:[],\r\n          side:''\r\n      },\r\n    //   验证地址栏对话框\r\n      addressFormRules:{\r\n          side: [{ required: true, message: '地址不能为空' }]\r\n      },\r\n      //   物流对话框\r\n      ordersVisible: false,\r\n      reverse: true,\r\n      activities: []\r\n    }\r\n  },\r\n  created() {\r\n    this.getordersList()\r\n  },\r\n  methods: {\r\n    async getordersList() {\r\n      const { data: res } = await ordersList_api(this.orderfrom)\r\n      if (res.meta.status !== 200) return this.$message.error('获取订单列表失败')\r\n      this.$message.success('获取订单列表成功')\r\n      this.tableData = res.data.goods\r\n      this.total = res.data.total\r\n    },\r\n    handleSizeChange(val) {\r\n      this.orderfrom.pagesize = val\r\n      this.getordersList()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.orderfrom.pagenum = val\r\n      this.getordersList()\r\n    },\r\n    // 点击打开修改地址对话框\r\n    openSide() {\r\n      this.sideVisible = true\r\n    },\r\n    // 地址对话框选中地址后\r\n    handleChange(val) {\r\n        // console.log(val);\r\n        this.addressForm.side=val.join('')\r\n    },\r\n    // 重置对话框\r\n    emptyAddress(){\r\n       this.addressForm.selectedKeys=[]\r\n        this.$refs.OrderSideFormRef.resetFields()\r\n    },\r\n    // 关闭地址对话框\r\n    addressClose(){\r\n        this.addressForm.selectedKeys=[]\r\n        this.$refs.OrderSideFormRef.resetFields()\r\n        this.sideVisible = false\r\n    },\r\n    // 点击打开物流信息对话框\r\n    async openOrders() {\r\n      const { data: res } = await ordersPany_api()\r\n      // console.log(res);\r\n      if (res.meta.status != 200) return this.$message.error('获取物流信息失败')\r\n      this.$message.success('获取物流信息成功')\r\n      console.log(res.data)\r\n      this.activities = res.data\r\n      this.ordersVisible = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang='less' scoped>\r\n.el-cascader {\r\n  width: 100% !important;\r\n}\r\n</style>"]}]}