{"remainingRequest":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\components\\BorrowCard\\BorrowCard.vue?vue&type=style&index=0&id=03665e22&lang=less&scoped=true&","dependencies":[{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\components\\BorrowCard\\BorrowCard.vue","mtime":1578115300762},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\less-loader\\dist\\cjs.js","mtime":1576755764101},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.item {\r\n  margin-top: 10px;\r\n  margin-right: 40px;\r\n}\r\n.checking{\r\n  margin: 20px 0;\r\n  .codeName{\r\n    width: 12.5rem;margin-right: 10px;\r\n  }\r\n  .add{float: right;}\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n",{"version":3,"sources":["BorrowCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BorrowCard.vue","sourceRoot":"src/components/BorrowCard","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 导航 -->\r\n    <Breadcrumb :value=\"common\"></Breadcrumb>\r\n    <el-card class=\"box-card\">\r\n      <!-- //借书证 -->\r\n      <el-row class=\"checking\">\r\n        <el-col :span=\"18\">\r\n          <div class=\"grid-content bg-purple\">\r\n            <span class=\"com_title\">read name：</span>\r\n            <el-input\r\n              class=\"codeName\"\r\n              ref=\"com_name\"\r\n              placeholder=\"Please enter read name\"\r\n              v-model=\"input1\"\r\n              size=\"small\"\r\n              clearable\r\n              @clear=\"clear\"\r\n            ></el-input>\r\n            <span class=\"com_title\">card No：</span>\r\n            <el-input\r\n              class=\"codeName\"\r\n              ref=\"com_name\"\r\n              placeholder=\"Please enter card No\"\r\n              v-model=\"value1\"\r\n              size=\"small\"\r\n              clearable\r\n              @clear=\"clear\"\r\n            ></el-input>\r\n            <el-button type=\"info\" size=\"small\" @click=\"searchClick\">Query</el-button>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <div class=\"grid-content bg-purple-light\">\r\n            <el-button\r\n              type=\"info\"\r\n              size=\"small\"\r\n              @click=\"dialogFormVisible = true\"\r\n              class=\"add\"\r\n            >Add administrator</el-button>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n      <el-table :data=\"tableData\" style=\"width: 100%\">\r\n        <el-table-column prop=\"id\" label=\"Order\"></el-table-column>\r\n        <el-table-column prop=\"name\" label=\"Borrower\"></el-table-column>\r\n        <el-table-column prop=\"barcode\" label=\"Borrower No\"></el-table-column>\r\n        <el-table-column label=\"Operation\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">Edit</el-button>\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\"\r\n            >Delete</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-dialog title=\"Add a library card\" :visible.sync=\"dialogFormVisible\">\r\n        <el-form :model=\"addForm\" :rules=\"rules\" ref=\"addForm\">\r\n          <el-form-item label=\"card name\" prop=\"name\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"addForm.name\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"card number\" prop=\"barcode\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"addForm.barcode\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button size=\"small\" @click=\"dialogFormVisible = false\">cancel</el-button>\r\n          <el-button size=\"small\" type=\"info\" @click=\"submitForm('addForm')\">confirm</el-button>\r\n        </div>\r\n      </el-dialog>\r\n      <el-dialog title=\"edit a library card\" :visible.sync=\"editFormVisible\">\r\n        <el-form :model=\"editRegion\" :rules=\"rules\" ref=\"editRegion\">\r\n          <el-form-item label=\"card name\" prop=\"name\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"editRegion.name\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"card number\" prop=\"barcode\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"editRegion.barcode\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button size=\"small\" @click.native=\"editFormVisible = false\">cancel</el-button>\r\n          <el-button size=\"small\" type=\"info\" @click=\"editSubmitRegion('editRegion')\">confirm</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { alllibraryCard_api, getlibraryCard_api,addlibraryCard_api,editlibraryCard_api,deletelibraryCard_api } from '@/api'\r\nexport default {\r\n  data() {\r\n    return {\r\n      common: ['Borrow card management'], //公共组件传值\r\n      input1:'',\r\n      value1:'',\r\n      tableData: [],\r\n      dialogFormVisible:false,\r\n      editFormVisible: false,\r\n      addForm: {\r\n      \tbarcode: '',\r\n      \tname: ''\r\n      },\r\n      editRegion: {\r\n      \tbarcode: '',\r\n      \tname: ''\r\n      },\r\n      formLabelWidth: '140px',\r\n      rules: {\r\n      \tbarcode: [{ required: true, message: 'Please input card number', trigger: 'blur' },\r\n            { type: 'string',\r\n              pattern: /^[0-9]{1,22}$/, // 正则表达式验证\r\n              message: 'Please enter a number number！',\r\n              trigger: 'blur'\r\n            }],\r\n      \tname: [{ required: true, message: 'Please input author', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getBorrowCardAll()\r\n  },\r\n  methods: {\r\n    // 清除clearInput\r\n    clear(){\r\n      this.show = true;\r\n        this.getBorrowCardAll()\r\n    },\r\n    async getBorrowCardAll() {\r\n\r\n      const { data: res } = await alllibraryCard_api()\r\n      if (res.status !== 200) return this.$message.error(res.msg)\r\n      this.tableData = res.data\r\n    },\r\n    //query 查询\r\n    searchClick(){\r\n       const nameCom = this.input1 // 姓名\r\n       const cardCom = this.value1 // 编号\r\n\r\n       if(nameCom == '' && cardCom == ''){\r\n         this.show = true;\r\n         this.getBorrowCardAll()\r\n       }else{\r\n         var  params = {\r\n           \"name\": nameCom,\r\n           \"barcode\": cardCom\r\n         }\r\n         getBorrowCard_api(params).then(res => {\r\n           if (res.data.status !== 200) {\r\n             return this.$message.error(res.data.msg)\r\n           } else {\r\n             // res.data.data.createdAt = moment(res.data.data.createdAt).format('YYYY-MM-DD')\r\n             var arr = []\r\n             arr.push(res.data.data)\r\n             this.tableData = arr\r\n           }\r\n         })\r\n       }\r\n    },\r\n    // edit\r\n    handleEdit(index, row) {\r\n        this.editFormVisible = true\r\n        this.editRegion = Object.assign({id:row.id}, row) // 这句是关键！！！\r\n    },\r\n    editSubmitRegion (formName) {\r\n    \tvar that = this\r\n    \tthis.$refs[formName].validate((valid) => {\r\n    \t\tif (valid) {\r\n    \t\tvar params ={\r\n          \"id\":that.editRegion.id,\r\n    \t\t  \"name\": that.editRegion.name,\r\n    \t\t  \"barcode\":that.editRegion.barcode,\r\n    \t\t}\r\n    \t\t\tthis.$confirm('Whether to commit',{\r\n    \t\t\t\tconfirmButtonText:'confirm',\r\n    \t\t\t\tcancelButtonText:'cancel',\r\n    \t\t\t\ttype:'warning',\r\n    \t\t\t\tcenter:true\r\n    \t\t\t})\r\n    \t\t\t.then(function(){\r\n    \t\t\t\t//ajax\r\n    \t\t\t\teditlibraryCard_api(params).then(res =>{\r\n    \t\t\t\t\tif(res.status === 200){\r\n    \t\t\t\t\t\tthat.editFormVisible = false\r\n    \t\t\t\t\t\tthat.getBorrowCardAll() //重新渲染数据\r\n    \t\t\t\t\t}else if(res.result.status == 2){\r\n    \t\t\t\t\t\tthat.$confirm(res.result.msg, 'hint', {\r\n                      type: 'warning'\r\n                 \t})\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}).catch(err =>{console.log(err)})\r\n    \t\t\t})\r\n    \t\t\t.catch(function(err){\r\n    \t\t\t\tconsole.log('Cancel')\r\n    \t\t\t})\r\n    \t\t} else {\r\n    \t\t\treturn false\r\n    \t\t}\r\n    \t})\r\n    },\r\n    //add 添加\r\n    submitForm(formName){\r\n        var that = this\r\n    \tthis.$refs[formName].validate((valid) =>{\r\n    \t\tif(valid){\r\n    \t\t\tvar params ={\r\n            \"name\": that.addForm.name,\r\n            \"barcode\":that.addForm.barcode,\r\n          }\r\n    \t\t\tthis.$confirm('Whether to commit',{\r\n    \t\t\t\tconfirmButtonText:'confirm',\r\n    \t\t\t\tcancelButtonText:'cancel',\r\n    \t\t\t\ttype:'warning',\r\n    \t\t\t\tcenter:true\r\n    \t\t\t})\r\n    \t\t\t.then(function(){\r\n    \t\t\t\t//ajax\r\n    \t\t\t\taddlibraryCard_api(params).then(res =>{\r\n    \t\t\t\t\tif(res.status === 200){ //此处的表单验证\r\n    \t\t\t\t\t\tthat.dialogFormVisible = false\r\n    \t\t\t\t\t\tthat.getBorrowCardAll() //重新渲染数据\r\n    \t\t\t\t\t}else{\r\n    \t\t\t\t\tthat.$confirm(res.result.msg, 'hint', {\r\n                      type: 'warning'\r\n                 \t})\r\n    \t\t\t\t}\r\n    \t\t\t\t}).catch(err =>{console.log(err)})\r\n    \t\t\t})\r\n    \t\t\t.catch(function(err){\r\n    \t\t\t\tconsole.log('Cancel')\r\n    \t\t\t})\r\n    \t\t} else {\r\n    \t\t\treturn false\r\n    \t\t}\r\n    \t})\r\n    },\r\n    // delete\r\n    handleDelete (index, row) {\r\n        var _self = this\r\n        this.$confirm('Are you sure to delete?', 'hint', {\r\n            confirmButtonText: 'delete',\r\n            cancelButtonText: 'waiting',\r\n            type: 'warning',\r\n            center: true\r\n              }).then(function() {\r\n            let params = {\r\n              bCardId:row.id\r\n            }\r\n        deletelibraryCard_api({data:params}).then(res => {\r\n        \tif(res.status == 200){\r\n        \t\t_self.$message({\r\n        \t\t  message: 'successfully delete',\r\n        \t\t  type: 'success'\r\n        \t  });\r\n        _self.getBorrowCardAll() //重新渲染数据\r\n        \t}\r\n        }).catch(err =>{console.log(err)})\r\n    \t\t  }).catch(function(e) {\r\n    \t\t\t  if (e != 'cancel') { console.log('error' + e) }\r\n    \t\t  })\r\n      }\r\n\r\n  },\r\n  mounted() {\r\n\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.item {\r\n  margin-top: 10px;\r\n  margin-right: 40px;\r\n}\r\n.checking{\r\n  margin: 20px 0;\r\n  .codeName{\r\n    width: 12.5rem;margin-right: 10px;\r\n  }\r\n  .add{float: right;}\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n</style>\r\n"]}]}