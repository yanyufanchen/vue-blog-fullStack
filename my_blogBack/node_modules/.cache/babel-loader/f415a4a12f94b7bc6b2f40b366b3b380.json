{"remainingRequest":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\babel-loader\\lib\\index.js!D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\components\\userManage\\userManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\components\\userManage\\userManage.vue","mtime":1583411151465},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\\\u5F00\\u53D1\\\\\\u4E2A\\u4EBA\\u670D\\u52A1\\u5668\\\\pengwang.xyz\\\\my_blogBack\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { allLogin_api, getLogin_api, addLogin_api, editLogin_api, deleteLogin_api } from '@/api';\nimport moment from 'moment'; // 时间过滤插件\n\nexport default {\n  data: function data() {\n    var _this = this;\n\n    return {\n      common: ['System setup'],\n      //公共组件传值\n      input1: '',\n      value1: '',\n      tableData: [],\n      dialogFormVisible: false,\n      editFormVisible: false,\n      addForm: {\n        username: '',\n        password: ''\n      },\n      editRegion: {\n        password: ''\n      },\n      formLabelWidth: '140px',\n      rulesRegion: {\n        username: [{\n          required: true,\n          message: 'Please input username',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: 'Please input password',\n          trigger: 'blur'\n        }]\n      },\n      rulesRegion1: {\n        validator: function validator(rule, value, callback) {\n          console.log(value, _this.editRegion.password, 111);\n\n          if (_this.editRegion.password.length <= 10) {\n            return callback('请输入正确密码');\n          }\n        }\n      }\n    };\n  },\n  created: function created() {\n    this.getLoginAll();\n  },\n  methods: {\n    // 清除clearInput\n    clear: function clear() {\n      this.show = true;\n      this.getLoginAll();\n    },\n    getLoginAll: function () {\n      var _getLoginAll = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, res, i;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return allLogin_api();\n\n              case 2:\n                _ref = _context.sent;\n                res = _ref.data;\n\n                if (!(res.status !== 200)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.$message.error(res.msg));\n\n              case 6:\n                for (i in res.data) {\n                  if (res.data[i].isSuper == 1) {\n                    res.data[i].isSuper = 'Super Admin';\n                  } else {\n                    res.data[i].isSuper = 'Admin';\n                  }\n                }\n\n                this.tableData = res.data;\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getLoginAll() {\n        return _getLoginAll.apply(this, arguments);\n      }\n\n      return getLoginAll;\n    }(),\n    //add\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      var that = this;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var params = {\n            \"username\": that.addForm.username,\n            \"password\": that.addForm.password\n          };\n\n          _this2.$confirm('Whether to commit', {\n            confirmButtonText: 'confirm',\n            cancelButtonText: 'cancel',\n            type: 'warning',\n            center: true\n          }).then(function () {\n            //ajax\n            addLogin_api(params).then(function (res) {\n              if (res.status == 200) {\n                //此处的表单验证\n                that.dialogFormVisible = false;\n                that.getLoginAll(); //重新渲染数据\n              } else {\n                that.$confirm(res.result.msg, 'hint', {\n                  type: 'warning'\n                });\n              }\n            }).catch(function (err) {\n              console.log(err);\n            });\n          }).catch(function (err) {\n            console.log('Cancel');\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    //edit\n    handleEdit: function handleEdit(index, row) {\n      this.editFormVisible = true;\n      this.editRegion = Object.assign({\n        id: row.id,\n        password: row.password\n      }); //这句是关键！！！\n    },\n    editSubmitRegion: function editSubmitRegion(formName) {\n      var _this3 = this;\n\n      var that = this;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var params = that.editRegion;\n\n          _this3.$confirm('Whether to commit', {\n            confirmButtonText: 'confirm',\n            cancelButtonText: 'cancel',\n            type: 'warning',\n            center: true\n          }).then(function () {\n            //ajax\n            editLogin_api(params).then(function (res) {\n              if (res.status == 200) {\n                that.editFormVisible = false;\n                that.getLoginAll(); //重新渲染数据\n              } else {\n                that.$confirm(res.result.msg, 'hint', {\n                  type: 'warning'\n                });\n              }\n            }).catch(function (err) {\n              console.log(err);\n            });\n          }).catch(function (err) {\n            console.log('Cancel');\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    //query\n    searchClick: function searchClick() {\n      var _this4 = this;\n\n      // 查询功能\n      //获取当前页面的信息，发送给后台 刷新页面\n      var nameCom = this.input1; //管理员名称\n\n      if (nameCom == '') {\n        this.getLoginAll();\n      } else {\n        var params = {\n          \"username\": nameCom\n        };\n        getLogin_api(params).then(function (res) {\n          if (res.data.status !== 200) {\n            return _this4.$message.error(res.data.msg);\n          } else {\n            if (res.data.data.isSuper == 1) {\n              res.data.data.isSuper = 'Super Admin';\n            } else {\n              res.data.data.isSuper = 'Admin';\n            }\n\n            var arr = [];\n            arr.push(res.data.data);\n            _this4.tableData = arr;\n          }\n        });\n      }\n    },\n    //delete\n    handleDelete: function handleDelete(index, row) {\n      var _self = this;\n\n      this.$confirm('Are you sure to delete?', 'hint', {\n        confirmButtonText: 'delete',\n        cancelButtonText: 'waiting',\n        type: 'warning',\n        center: true\n      }).then(function () {\n        var params = {\n          LoginId: row.id\n        };\n        deleteLogin_api({\n          data: params\n        }).then(function (res) {\n          if (res.status == 200) {\n            _self.$message({\n              message: 'successfully delete',\n              type: 'success'\n            });\n\n            _self.getLoginAll(); //重新渲染数据\n\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }).catch(function (e) {\n        if (e != \"cancel\") console.log(\"error:\" + e);\n      });\n    }\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["userManage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!-- 导航 -->\r\n\t\t<Breadcrumb :value=\"common\"></Breadcrumb>\r\n\t\t<el-card class=\"box-card\">\r\n\t\t\t<el-row class=\"checking\">\r\n\t\t\t\t<el-col :span=\"20\">\r\n\t\t\t\t\t<div class=\"grid-content bg-purple\">\r\n\t\t\t\t\t\t<span class=\"com_title\">Administrator name：</span>\r\n\t\t\t\t\t\t<el-input\r\n\t\t\t\t\t\t\tclass=\"codeName\"\r\n\t\t\t\t\t\t\tref=\"com_name\"\r\n\t\t\t\t\t\t\tplaceholder=\"Please enter administrator name\"\r\n\t\t\t\t\t\t\tv-model=\"input1\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t@clear=\"clear\"\r\n\t\t\t\t\t\t></el-input>\r\n\t\t\t\t\t\t<el-button type=\"info\" size=\"small\" @click=\"searchClick\">Query</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t<div class=\"grid-content bg-purple-light\">\r\n\t\t\t\t\t\t<el-button\r\n\t\t\t\t\t\t\ttype=\"info\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t@click=\"dialogFormVisible = true\"\r\n\t\t\t\t\t\t\tclass=\"add\"\r\n\t\t\t\t\t\t>Add administrator</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t\t<el-table :data=\"tableData\" style=\"width: 100%\">\r\n\t\t\t\t<el-table-column prop=\"username\" label=\"Administrator name\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"password\" label=\"Administrator password\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"isSuper\" label=\"Administrator\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"Operation\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button\r\n\t\t\t\t\t\t\tv-if=\"scope.row.isSuper !='Super Admin' \"\r\n\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\t@click=\"handleEdit(scope.$index, scope.row)\"\r\n\t\t\t\t\t\t>Edit</el-button>\r\n\t\t\t\t\t\t<el-button\r\n\t\t\t\t\t\t\tv-if=\"scope.row.isSuper !='Super Admin'\"\r\n\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\ttype=\"danger\"\r\n\t\t\t\t\t\t\t@click=\"handleDelete(scope.$index, scope.row)\"\r\n\t\t\t\t\t\t>Delete</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<el-dialog title=\"add Admin\" :visible.sync=\"dialogFormVisible\">\r\n\t\t\t\t\r\n\t\t\t\t<!-- <el-form :model=\"addForm\" :rules=\"rulesRegion\" ref=\"addForm\"> -->\r\n\t\t\t\t<el-form :model=\"addForm\" :rules=\"rulesRegion\" ref=\"addForm\">\r\n\t\t\t\t\t<el-form-item  label=\"username\" prop=\"username\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t<el-input v-model=\"addForm.username\" autocomplete=\"off\" clearable></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"password\" prop=\"password\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t<el-input v-model=\"addForm.password\" autocomplete=\"off\" clearable></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button size=\"small\" @click=\"dialogFormVisible = false\">cancel</el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"info\" @click=\"submitForm('addForm')\">confirm</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</el-dialog>\r\n\t\t\t<el-dialog title=\"edit\" :visible.sync=\"editFormVisible\">\r\n\t\t\t\t<el-form :model=\"editRegion\"  ref=\"editRegion\">\r\n\t\t\t\t\t<el-form-item :rules=\"rulesRegion1\" label=\"password111\" prop=\"validator\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t<el-input v-model=\"editRegion.password\" autocomplete=\"off\" clearable></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button size=\"small\" @click.native=\"editFormVisible = false\">cancel</el-button>\r\n\t\t\t\t\t<el-button size=\"small\" type=\"info\" @click=\"editSubmitRegion('editRegion')\">confirm</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</el-dialog>\r\n\t\t</el-card>\r\n\t</div>\r\n</template>\r\n<script>\r\n  import { allLogin_api, getLogin_api,addLogin_api,editLogin_api,deleteLogin_api } from '@/api'\r\n  import moment from 'moment' // 时间过滤插件\r\nexport default {\r\n  data() {\r\n    return {\r\n      common: ['System setup'], //公共组件传值\r\n      input1:'',\r\n      value1:'',\r\n      tableData: [],\r\n      dialogFormVisible:false,\r\n      editFormVisible:false,\r\n      addForm:{\r\n\t\t\tusername:'',\r\n\t\t\tpassword:'',\r\n\t\t},\r\n\t\teditRegion: {\r\n\t\t\tpassword:''\r\n\t\t},\r\n\t\tformLabelWidth:'140px',\r\n\t\trulesRegion:{\r\n\t\t\tusername:[{required:true,message:'Please input username',trigger:'blur'}],\r\n\t\t\tpassword:[{required:true,message:'Please input password',trigger:'blur'}]\r\n\t\t},\r\n\t\trulesRegion1: {\r\n\t\t\tvalidator: (rule,value,callback)=>{\r\n\t\t\t\tconsole.log(value,this.editRegion.password,111);\r\n\t\t\t\tif(this.editRegion.password.length<=10){\r\n\t\t\t\t\treturn callback('请输入正确密码')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n  },\r\n  created() {\r\n    this.getLoginAll()\r\n  },\r\n  methods: {\r\n\t    // 清除clearInput\r\n    clear(){\r\n      this.show = true;\r\n        this.getLoginAll()\r\n    },\r\n\t  async getLoginAll() {\r\n\t    const { data: res } = await allLogin_api()\r\n\t    if (res.status !== 200) return this.$message.error(res.msg)\r\n      for(var i in res.data){\r\n        if(res.data[i].isSuper == 1){\r\n          res.data[i].isSuper = 'Super Admin'\r\n        }else{\r\n          res.data[i].isSuper = 'Admin'\r\n        }\r\n      }\r\n\t    this.tableData = res.data\r\n\t  },\r\n\t  //add\r\n\t  submitForm(formName){\r\n\t      var that = this\r\n\t  \tthis.$refs[formName].validate((valid) =>{\r\n\t  \t\tif(valid){\r\n\r\n\t  \t\t\tvar params ={\r\n            \"username\":that.addForm.username,\r\n            \"password\":that.addForm.password\r\n          }\r\n\t  \t\t\tthis.$confirm('Whether to commit',{\r\n\t  \t\t\t\tconfirmButtonText:'confirm',\r\n\t  \t\t\t\tcancelButtonText:'cancel',\r\n\t  \t\t\t\ttype:'warning',\r\n\t  \t\t\t\tcenter:true\r\n\t  \t\t\t})\r\n\t  \t\t\t.then(function(){\r\n\t  \t\t\t\t//ajax\r\n\t  \t\t\t\taddLogin_api(params).then(res =>{\r\n\t  \t\t\t\t\tif(res.status == 200){ //此处的表单验证\r\n\t  \t\t\t\t\t\tthat.dialogFormVisible = false\r\n\t  \t\t\t\t\t\tthat.getLoginAll() //重新渲染数据\r\n\t  \t\t\t\t\t}else{\r\n\t  \t\t\t\t\tthat.$confirm(res.result.msg, 'hint', {\r\n\t                    type: 'warning'\r\n\t               \t})\r\n\t  \t\t\t\t}\r\n\t  \t\t\t\t}).catch(err =>{console.log(err)})\r\n\t  \t\t\t})\r\n\t  \t\t\t.catch(function(err){\r\n\t  \t\t\t\tconsole.log('Cancel')\r\n\t  \t\t\t})\r\n\t  \t\t} else {\r\n\t  \t\t\treturn false\r\n\t  \t\t}\r\n\t  \t})\r\n\t  },\r\n\t  //edit\r\n\t  handleEdit(index, row) {\r\n\t      this.editFormVisible = true;\r\n\t      this.editRegion = Object.assign({id:row.id,password:row.password}); //这句是关键！！！\r\n\t  },\r\n\t  editSubmitRegion (formName) {\r\n\t  \tvar that = this\r\n\t  \tthis.$refs[formName].validate((valid) =>{\r\n\t  \t\tif(valid){\r\n\t  \t\tvar params = that.editRegion\r\n\t  \t\t\tthis.$confirm('Whether to commit',{\r\n\t  \t\t\t\tconfirmButtonText:'confirm',\r\n\t  \t\t\t\tcancelButtonText:'cancel',\r\n\t  \t\t\t\ttype:'warning',\r\n\t  \t\t\t\tcenter:true\r\n\t  \t\t\t})\r\n\t  \t\t\t.then(function(){\r\n\t  \t\t\t\t//ajax\r\n\t  \t\t\t\teditLogin_api(params).then(res =>{\r\n\t  \t\t\t\t\tif(res.status == 200){\r\n\t  \t\t\t\t\t\tthat.editFormVisible = false\r\n\t  \t\t\t\t\t\tthat.getLoginAll() //重新渲染数据\r\n\t  \t\t\t\t\t}else{\r\n\t  \t\t\t\t\t\tthat.$confirm(res.result.msg, 'hint', {\r\n\t                    type: 'warning'\r\n\t               \t})\r\n\t  \t\t\t\t\t}\r\n\t  \t\t\t\t}).catch(err =>{console.log(err)})\r\n\t  \t\t\t})\r\n\t  \t\t\t.catch(function(err){\r\n\t  \t\t\t\tconsole.log('Cancel')\r\n\t  \t\t\t})\r\n\t  \t\t} else {\r\n\t  \t\t\treturn false\r\n\t  \t\t}\r\n\t  \t})\r\n\t  },\r\n\t  //query\r\n\t  searchClick(){ // 查询功能\r\n\t  \t//获取当前页面的信息，发送给后台 刷新页面\r\n\t  \tconst nameCom = this.input1; //管理员名称\r\n      if(nameCom == ''){\r\n        this.getLoginAll()\r\n      }else{\r\n        var  params = {\r\n          \"username\": nameCom,\r\n        }\r\n        getLogin_api(params).then(res => {\r\n          if (res.data.status !== 200) {\r\n            return this.$message.error(res.data.msg)\r\n          } else {\r\n            if(res.data.data.isSuper == 1){\r\n              res.data.data.isSuper = 'Super Admin'\r\n            }else{\r\n              res.data.data.isSuper = 'Admin'\r\n            }\r\n            var arr = []\r\n            arr.push(res.data.data)\r\n            this.tableData = arr\r\n          }\r\n        })\r\n      }\r\n\r\n\t  },\r\n\t  //delete\r\n\t  handleDelete (index,row) {\r\n\t      var _self = this;\r\n\t      this.$confirm('Are you sure to delete?', 'hint', {\r\n\t          confirmButtonText:'delete',\r\n\t  \t\t\t  cancelButtonText:'waiting',\r\n\t  \t\t\t  type:'warning',\r\n\t  \t\t\t  center:true\r\n\t  \t\t\t\t  }).then(function(){\r\n\t  \t\t\t\t\tlet params = {\r\n\t  \t\t\t\t\t\tLoginId:row.id\r\n\t  \t\t\t\t\t}\r\n\t  \t\t\t\t\tdeleteLogin_api({data:params}).then(res => {\r\n\t  \t\t\t\t\t\tif(res.status == 200){\r\n\t  \t\t\t\t\t\t\t_self.$message({\r\n\t  \t\t\t\t\t\t\t  message: 'successfully delete',\r\n\t  \t\t\t\t\t\t\t  type: 'success'\r\n\t  \t\t\t\t\t\t  });\r\n\t  \t\t\t\t\t_self.getLoginAll() //重新渲染数据\r\n\t  \t\t\t\t\t\t}\r\n\t  \t\t\t\t\t}).catch(err =>{console.log(err)})\r\n\t  \t\t\t\t  }).catch(function(e){\r\n\t  \t\t\t\t\t  if(e != \"cancel\")\r\n\t  \t\t\t\t\t\t  console.log(\"error:\" + e);\r\n\t  \t\t\t\t  });\r\n\t  \t\t  },\r\n  },\r\n  mounted() {}\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.item {\r\n  margin-top: 10px;\r\n  margin-right: 40px;\r\n}\r\n.checking{\r\n  margin: 20px 0;\r\n  .codeName{\r\n    width: 12.5rem;margin-right: 10px;\r\n  }\r\n  .add{float: right;}\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n</style>\r\n"],"sourceRoot":"src/components/userManage"}]}