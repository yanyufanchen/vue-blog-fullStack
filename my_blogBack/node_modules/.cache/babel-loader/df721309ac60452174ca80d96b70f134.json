{"remainingRequest":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\babel-loader\\lib\\index.js!D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\router.js","dependencies":[{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\router.js","mtime":1590317345561},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Router from 'vue-router'; // admin\n\nvar adminLogin = function adminLogin() {\n  return import(\n  /* webpackChunkName:\"login_index_Home\" */\n  \"./components/Login.vue\");\n};\n\nvar adminIndex = function adminIndex() {\n  return import(\n  /* webpackChunkName:\"login_index_Home\" */\n  \"./components/Index.vue\");\n};\n\nvar adminHome = function adminHome() {\n  return import(\n  /* webpackChunkName:\"login_index_Home\" */\n  \"./components/Home/Home.vue\");\n};\n\nvar adminAbout_me = function adminAbout_me() {\n  return import(\n  /* webpackChunkName:\"About_me_Skill\" */\n  \"./components/Me/About_me.vue\");\n};\n\nvar adminSkill = function adminSkill() {\n  return import(\n  /* webpackChunkName:\"About_me_Skill\" */\n  \"./components/Me/Skill.vue\");\n};\n\nvar adminProject = function adminProject() {\n  return import(\n  /* webpackChunkName:\"contentMag\" */\n  \"./components/ContentMag/Project.vue\");\n};\n\nvar adminPost = function adminPost() {\n  return import(\n  /* webpackChunkName:\"contentMag\" */\n  \"./components/ContentMag/Post.vue\");\n};\n\nvar adminPorsion = function adminPorsion() {\n  return import(\n  /* webpackChunkName:\"FansMag\" */\n  \"./components/FansMag/Porsion.vue\");\n};\n\nvar adminComment = function adminComment() {\n  return import(\n  /* webpackChunkName:\"FansMag\" */\n  \"./components/FansMag/Comment.vue\");\n};\n\nvar adminAccount = function adminAccount() {\n  return import(\n  /* webpackChunkName:\"System\" */\n  \"./components/System/Account.vue\");\n};\n\nvar adminDeskSet = function adminDeskSet() {\n  return import(\n  /* webpackChunkName:\"System\" */\n  \"./components/System/DeskSet.vue\");\n}; // desk\n\n\nvar Index = function Index() {\n  return import(\n  /* webpackChunkName:\"login_index_Home\" */\n  \"./deskComponents/Index.vue\");\n};\n\nVue.use(Router);\nvar router = new Router({\n  mode: 'history',\n  routes: [{\n    path: '/',\n    redirect: '/index'\n  }, {\n    path: '/admin',\n    redirect: '/login',\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/login',\n    component: adminLogin // meta: { requiresAuth: true }\n\n  }, {\n    path: '/admin/index',\n    component: adminIndex,\n    meta: {\n      requiresAuth: true\n    },\n    children: [{\n      path: '/admin/index',\n      redirect: '/admin/home',\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: '/admin/home',\n      component: adminHome,\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: '/admin/about_me',\n      component: adminAbout_me,\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: '/admin/skill',\n      component: adminSkill,\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: '/admin/project',\n      component: adminProject,\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: '/admin/post',\n      component: adminPost,\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: '/admin/comment',\n      component: adminComment,\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: '/admin/porsion',\n      component: adminPorsion,\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: '/admin/account',\n      component: adminAccount,\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: '/admin/deskset',\n      component: adminDeskSet,\n      meta: {\n        requiresAuth: true\n      }\n    }]\n  }, {\n    path: '/index',\n    component: Index // children: [{\n    //     path: '/admin/index',\n    //     redirect: '/admin/home'\n    //   },\n    //   {\n    //     path: '/admin/home',\n    //     component: adminHome\n    //   },\n    //   {\n    //     path: '/admin/about_me',\n    //     component: adminAbout_me\n    //   },\n    //   {\n    //     path: '/admin/skill',\n    //     component: adminSkill\n    //   },\n    //   {\n    //     path: '/admin/project',\n    //     component: adminProject\n    //   },\n    //   {\n    //     path: '/admin/post',\n    //     component: adminPost\n    //   },\n    //   {\n    //     path: '/admin/comment',\n    //     component: adminComment\n    //   },\n    //   {\n    //     path: '/admin/porsion',\n    //     component: adminPorsion\n    //   },\n    // ]\n\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  console.log(to, '进入全局守卫');\n  var tokenstr = window.sessionStorage.getItem('token'); //判断访问的页面是否有requiresAuth字段\n\n  if (to.matched.some(function (record) {\n    return record.meta.requiresAuth;\n  })) {\n    console.log(to, '需要检测登录'); // 如果未登录，则跳转到登录页面\n    // 否则正常跳转\n\n    if (!tokenstr) {\n      console.log('没有登录');\n      next({\n        path: '/login' // query: { redirect: to.fullPath }\n\n      });\n    } else {\n      next();\n    }\n  } else {\n    // 如果请求'login'页面\n    if (to.path == '/login') {\n      console.log('主动请求login'); // 验证tokenstr合法性，后期优化\n\n      if (tokenstr) {\n        console.log(tokenstr, '验证tokenstr合法性');\n        next({\n          path: '/admin/index' // query: { redirect: to.fullPath }\n\n        });\n      }\n    }\n\n    next(); // 确保一定要调用 next()\n  }\n});\nexport default router;",{"version":3,"sources":["D:\\开发\\个人服务器\\pengwang.xyz\\my_blogBack\\src\\router.js"],"names":["Vue","Router","adminLogin","adminIndex","adminHome","adminAbout_me","adminSkill","adminProject","adminPost","adminPorsion","adminComment","adminAccount","adminDeskSet","Index","use","router","mode","routes","path","redirect","meta","requiresAuth","component","children","beforeEach","to","from","next","console","log","tokenstr","window","sessionStorage","getItem","matched","some","record"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Router from 'vue-router'\r\n// admin\r\nconst adminLogin = () => import( /* webpackChunkName:\"login_index_Home\" */ './components/Login.vue')\r\nconst adminIndex = () => import( /* webpackChunkName:\"login_index_Home\" */ './components/Index.vue')\r\nconst adminHome = () => import( /* webpackChunkName:\"login_index_Home\" */ './components/Home/Home.vue')\r\n\r\nconst adminAbout_me = () => import( /* webpackChunkName:\"About_me_Skill\" */ './components/Me/About_me.vue')\r\nconst adminSkill = () => import( /* webpackChunkName:\"About_me_Skill\" */ './components/Me/Skill.vue')\r\n\r\nconst adminProject = () => import( /* webpackChunkName:\"contentMag\" */ './components/ContentMag/Project.vue')\r\nconst adminPost = () => import( /* webpackChunkName:\"contentMag\" */ './components/ContentMag/Post.vue')\r\n\r\nconst adminPorsion = () => import( /* webpackChunkName:\"FansMag\" */ './components/FansMag/Porsion.vue')\r\nconst adminComment = () => import( /* webpackChunkName:\"FansMag\" */ './components/FansMag/Comment.vue')\r\n\r\nconst adminAccount = () => import( /* webpackChunkName:\"System\" */ './components/System/Account.vue')\r\nconst adminDeskSet = () => import( /* webpackChunkName:\"System\" */ './components/System/DeskSet.vue')\r\n\r\n// desk\r\nconst Index = () => import( /* webpackChunkName:\"login_index_Home\" */ './deskComponents/Index.vue')\r\n\r\n\r\n\r\nVue.use(Router)\r\n\r\nconst router = new Router({\r\n  mode: 'history',\r\n  routes: [{\r\n      path: '/',\r\n      redirect: '/index'\r\n    }, \r\n    {\r\n      path: '/admin',\r\n      redirect: '/login',\r\n      meta: { requiresAuth: true }\r\n    },\r\n\r\n    {\r\n      path: '/login',\r\n      component: adminLogin,\r\n      // meta: { requiresAuth: true }\r\n    },\r\n\r\n    {\r\n      path: '/admin/index',\r\n      component: adminIndex,\r\n      meta: { requiresAuth: true },\r\n      children: [{\r\n          path: '/admin/index',\r\n          redirect: '/admin/home',\r\n          meta: { requiresAuth: true }\r\n        },\r\n        {\r\n          path: '/admin/home',\r\n          component: adminHome,\r\n          meta: { requiresAuth: true }\r\n        },\r\n        {\r\n          path: '/admin/about_me',\r\n          component: adminAbout_me,\r\n          meta: { requiresAuth: true }\r\n        },\r\n        {\r\n          path: '/admin/skill',\r\n          component: adminSkill,\r\n          meta: { requiresAuth: true }\r\n        },\r\n        {\r\n          path: '/admin/project',\r\n          component: adminProject,\r\n          meta: { requiresAuth: true }\r\n        },\r\n        {\r\n          path: '/admin/post',\r\n          component: adminPost,\r\n          meta: { requiresAuth: true }\r\n        },\r\n        {\r\n          path: '/admin/comment',\r\n          component: adminComment,\r\n          meta: { requiresAuth: true }\r\n        },\r\n        {\r\n          path: '/admin/porsion',\r\n          component: adminPorsion,\r\n          meta: { requiresAuth: true }\r\n        },\r\n        {\r\n          path: '/admin/account',\r\n          component: adminAccount,\r\n          meta: { requiresAuth: true }\r\n        },\r\n        {\r\n          path: '/admin/deskset',\r\n          component: adminDeskSet,\r\n          meta: { requiresAuth: true }\r\n        },\r\n      ]\r\n    },\r\n    {\r\n      path: '/index',\r\n      component: Index\r\n      // children: [{\r\n      //     path: '/admin/index',\r\n      //     redirect: '/admin/home'\r\n      //   },\r\n      //   {\r\n      //     path: '/admin/home',\r\n      //     component: adminHome\r\n      //   },\r\n      //   {\r\n      //     path: '/admin/about_me',\r\n      //     component: adminAbout_me\r\n      //   },\r\n      //   {\r\n      //     path: '/admin/skill',\r\n      //     component: adminSkill\r\n      //   },\r\n      //   {\r\n      //     path: '/admin/project',\r\n      //     component: adminProject\r\n      //   },\r\n      //   {\r\n      //     path: '/admin/post',\r\n      //     component: adminPost\r\n      //   },\r\n      //   {\r\n      //     path: '/admin/comment',\r\n      //     component: adminComment\r\n      //   },\r\n      //   {\r\n      //     path: '/admin/porsion',\r\n      //     component: adminPorsion\r\n      //   },\r\n      // ]\r\n    },\r\n  ]\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  console.log(to,'进入全局守卫');\r\n  let tokenstr = window.sessionStorage.getItem('token')\r\n  //判断访问的页面是否有requiresAuth字段\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    console.log(to,'需要检测登录');\r\n    // 如果未登录，则跳转到登录页面\r\n    \r\n    // 否则正常跳转\r\n    if (!tokenstr) {\r\n      console.log('没有登录');\r\n      next({\r\n        path: '/login',\r\n        // query: { redirect: to.fullPath }\r\n      })\r\n    } else {\r\n      next()\r\n    }\r\n  } else {\r\n    // 如果请求'login'页面\r\n    if(to.path=='/login'){\r\n      console.log('主动请求login');\r\n      // 验证tokenstr合法性，后期优化\r\n      if(tokenstr){\r\n        console.log(tokenstr,'验证tokenstr合法性');\r\n        next({\r\n          path: '/admin/index',\r\n          // query: { redirect: to.fullPath }\r\n        })\r\n      }\r\n    }\r\n    \r\n    next() // 确保一定要调用 next()\r\n  }\r\n})\r\n\r\n\r\nexport default router\r\n"]}]}