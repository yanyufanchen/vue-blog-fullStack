{"remainingRequest":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\src\\components\\Book\\BookReservation.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\src\\components\\Book\\BookReservation.vue","mtime":1577495608314},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\wangpeng\\\\Desktop\\\\mt\\\\vue-ht\\\\library\\\\my_library\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { allReservation_api, getReservation_api, addReservation_api, editReservation_api, deleteReservation_api } from '@/api';\nexport default {\n  data: function data() {\n    return {\n      common: [' Book Reservation'],\n      //公共组件传值\n      input1: '',\n      value1: '',\n      tableData: [],\n      dialogFormVisible: false,\n      editFormVisible: false,\n      addForm: {\n        title: '',\n        name: ''\n      },\n      editRegion: {\n        title: '',\n        name: ''\n      },\n      formLabelWidth: '140px',\n      rules: {\n        title: [{\n          required: true,\n          message: '请填写编号',\n          trigger: 'blur'\n        }, {\n          type: 'string',\n          pattern: /^[0-9]{1,22}$/,\n          // 正则表达式验证\n          message: '请输入数字编号！',\n          trigger: 'blur'\n        }],\n        name: [{\n          required: true,\n          message: '请填写作者',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    this.getReservationAll();\n  },\n  methods: {\n    getReservationAll: function () {\n      var _getReservationAll = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, res;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return allReservation_api();\n\n              case 2:\n                _ref = _context.sent;\n                res = _ref.data;\n                console.log(res);\n\n                if (!(res.status !== 200)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.$message.error(res.msg));\n\n              case 7:\n                // console.log(res)\n                this.tableData = res.data;\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getReservationAll() {\n        return _getReservationAll.apply(this, arguments);\n      }\n\n      return getReservationAll;\n    }(),\n    //query 查询\n    searchClick: function searchClick() {\n      var _this = this;\n\n      var nameCom = this.input1; // 姓名\n\n      var cardCom = this.value1; // 编号\n\n      if (nameCom == '' && cardCom == '') {\n        this.show = true;\n        this.getReservationAll();\n      } else {\n        var params = {\n          \"name\": nameCom,\n          \"title\": cardCom\n        };\n        getReservation_api(params).then(function (res) {\n          if (res.data.status !== 200) {\n            return _this.$message.error(res.data.msg);\n          } else {\n            // res.data.data.createdAt = moment(res.data.data.createdAt).format('YYYY-MM-DD')\n            var arr = [];\n            arr.push(res.data.data);\n            _this.tableData = arr;\n          }\n        });\n      }\n    },\n    // edit\n    handleEdit: function handleEdit(index, row) {\n      this.editFormVisible = true;\n      this.editRegion = Object.assign({\n        id: row.id\n      }, row); // 这句是关键！！！\n    },\n    editSubmitRegion: function editSubmitRegion(formName) {\n      var _this2 = this;\n\n      var that = this;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var params = {\n            \"id\": that.editRegion.id,\n            \"name\": that.editRegion.name,\n            \"title\": that.editRegion.title\n          };\n          console.log(params);\n\n          _this2.$confirm('是否确认提交', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning',\n            center: true\n          }).then(function () {\n            //ajax\n            editReservation_api(params).then(function (res) {\n              console.log(res.data.status);\n\n              if (res.status === 200) {\n                that.editFormVisible = false;\n                that.getReservationAll(); //重新渲染数据\n              } else if (res.result.status == 2) {\n                that.$confirm(res.result.msg, '提示', {\n                  type: 'warning'\n                });\n              }\n            }).catch(function (err) {\n              console.log(err);\n            });\n          }).catch(function (err) {\n            console.log('Cancel');\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    //add 添加\n    submitForm: function submitForm(formName) {\n      var _this3 = this;\n\n      var that = this;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var params = {\n            \"name\": that.addForm.name,\n            \"title\": that.addForm.title\n          };\n\n          _this3.$confirm('是否确认提交', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning',\n            center: true\n          }).then(function () {\n            //ajax\n            addReservation_api(params).then(function (res) {\n              if (res.status === 200) {\n                //此处的表单验证\n                that.dialogFormVisible = false;\n                that.getReservationAll(); //重新渲染数据\n              } else {\n                that.$confirm(res.result.msg, '提示', {\n                  type: 'warning'\n                });\n              }\n            }).catch(function (err) {\n              console.log(err);\n            });\n          }).catch(function (err) {\n            console.log('Cancel');\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // delete\n    handleDelete: function handleDelete(index, row) {\n      var _self = this;\n\n      this.$confirm('确认删除吗? 删除之后,数据将不可恢复,请慎重选择！', '提示', {\n        confirmButtonText: '删除',\n        cancelButtonText: '我再想一下',\n        type: 'warning',\n        center: true\n      }).then(function () {\n        var params = {\n          ReserId: row.id\n        };\n        deleteReservation_api({\n          data: params\n        }).then(function (res) {\n          if (res.status == 200) {\n            _self.$message({\n              message: '删除成功',\n              type: 'success'\n            });\n\n            _self.getReservationAll(); //重新渲染数据\n\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }).catch(function (e) {\n        if (e != 'cancel') {\n          console.log('出现错误：' + e);\n        }\n      });\n    }\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["BookReservation.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 导航 -->\r\n    <Breadcrumb :value=\"common\"></Breadcrumb>\r\n    <el-card class=\"box-card\">\r\n\t\t\t<!-- //信息统计 -->\r\n       Book Reservation\r\n    </el-card>\r\n    <el-row class=\"checking\">\r\n      <el-col :span=\"18\"><div class=\"grid-content bg-purple\">\r\n      <span class=\"com_title\">Appointments：</span><el-input\r\n      \tclass='codeName'\r\n      \tref='com_name'\r\n      \tplaceholder=\"Please enter Appointments\"\r\n      \tv-model=\"input1\"\r\n        size=\"small\"\r\n      \tclearable>\r\n      </el-input>\r\n      <span class=\"com_title\">title name：</span><el-input\r\n      \tclass='codeName'\r\n      \tref='com_name'\r\n      \tplaceholder=\"Please enter title name\"\r\n      \tv-model=\"value1\"\r\n        size=\"small\"\r\n      \tclearable>\r\n      </el-input>\r\n      <el-button type=\"primary\" size=\"small\" @click='searchClick'>Query</el-button>\r\n      </div></el-col>\r\n      <el-col :span=\"6\"><div class=\"grid-content bg-purple-light\">\r\n        <el-button type=\"primary\" size=\"small\" @click='dialogFormVisible = true' class=\"add\">Add administrator</el-button>\r\n      </div></el-col>\r\n    </el-row>\r\n    <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%\">\r\n      <el-table-column\r\n        prop=\"id\"\r\n        label=\"Order\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"name\"\r\n        label=\"Appointments\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"title\"\r\n        label=\"TitleName\">\r\n      </el-table-column>\r\n      <el-table-column label=\"Operation\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                size=\"mini\"\r\n                @click=\"handleEdit(scope.$index, scope.row)\">Edit</el-button>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"handleDelete(scope.$index, scope.row)\">Delete</el-button>\r\n            </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog title=\"添加预约\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form :model=\"addForm\" :rules='rules' ref='addForm'>\r\n      \t<el-form-item label=\"预约姓名\" prop='name' :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"addForm.name\" autocomplete=\"off\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"预约书名\" prop='title' :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"addForm.title\" autocomplete=\"off\" clearable></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button size=\"small\" type=\"primary\" @click=\"submitForm('addForm')\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n      <el-dialog title=\"编辑预约\" :visible.sync=\"editFormVisible\">\r\n        <el-form :model=\"editRegion\" :rules='rules' ref='editRegion'>\r\n        \t<el-form-item label=\"预约姓名\" prop='name' :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"editRegion.name\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"预约书名\" prop='title' :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"editRegion.title\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button size=\"small\" @click.native=\"editFormVisible = false\">取 消</el-button>\r\n          <el-button size=\"small\" type=\"primary\" @click=\"editSubmitRegion('editRegion')\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { allReservation_api, getReservation_api,addReservation_api,editReservation_api,deleteReservation_api  } from '@/api'\r\nexport default {\r\n  data() {\r\n    return {\r\n      common: [' Book Reservation'], //公共组件传值\r\n      input1:'',\r\n      value1:'',\r\n      tableData: [],\r\n      dialogFormVisible:false,\r\n      editFormVisible: false,\r\n      addForm: {\r\n      \ttitle: '',\r\n      \tname: ''\r\n      },\r\n      editRegion: {\r\n      \ttitle: '',\r\n      \tname: ''\r\n      },\r\n      formLabelWidth: '140px',\r\n      rules: {\r\n      \ttitle: [{ required: true, message: '请填写编号', trigger: 'blur' },\r\n            { type: 'string',\r\n              pattern: /^[0-9]{1,22}$/, // 正则表达式验证\r\n              message: '请输入数字编号！',\r\n              trigger: 'blur'\r\n            }],\r\n      \tname: [{ required: true, message: '请填写作者', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getReservationAll()\r\n  },\r\n  methods: {\r\n    async getReservationAll() {\r\n\r\n      const { data: res } = await allReservation_api()\r\n      console.log(res)\r\n      if (res.status !== 200) return this.$message.error(res.msg)\r\n    \t// console.log(res)\r\n      this.tableData = res.data\r\n    },\r\n    //query 查询\r\n    searchClick(){\r\n       const nameCom = this.input1 // 姓名\r\n       const cardCom = this.value1 // 编号\r\n\r\n       if(nameCom == '' && cardCom == ''){\r\n         this.show = true;\r\n         this.getReservationAll()\r\n       }else{\r\n         var  params = {\r\n           \"name\": nameCom,\r\n           \"title\": cardCom\r\n         }\r\n         getReservation_api(params).then(res => {\r\n           if (res.data.status !== 200) {\r\n             return this.$message.error(res.data.msg)\r\n           } else {\r\n             // res.data.data.createdAt = moment(res.data.data.createdAt).format('YYYY-MM-DD')\r\n             var arr = []\r\n             arr.push(res.data.data)\r\n             this.tableData = arr\r\n           }\r\n         })\r\n       }\r\n    },\r\n    // edit\r\n    handleEdit(index, row) {\r\n        this.editFormVisible = true\r\n        this.editRegion = Object.assign({id:row.id}, row) // 这句是关键！！！\r\n    },\r\n    editSubmitRegion (formName) {\r\n    \tvar that = this\r\n    \tthis.$refs[formName].validate((valid) => {\r\n    \t\tif (valid) {\r\n    \t\tvar params ={\r\n          \"id\":that.editRegion.id,\r\n    \t\t  \"name\": that.editRegion.name,\r\n    \t\t  \"title\":that.editRegion.title,\r\n    \t\t}\r\n        console.log(params)\r\n    \t\t\tthis.$confirm('是否确认提交',{\r\n    \t\t\t\tconfirmButtonText:'确定',\r\n    \t\t\t\tcancelButtonText:'取消',\r\n    \t\t\t\ttype:'warning',\r\n    \t\t\t\tcenter:true\r\n    \t\t\t})\r\n    \t\t\t.then(function(){\r\n    \t\t\t\t//ajax\r\n    \t\t\t\teditReservation_api(params).then(res =>{\r\n              console.log(res.data.status)\r\n    \t\t\t\t\tif(res.status === 200){\r\n    \t\t\t\t\t\tthat.editFormVisible = false\r\n    \t\t\t\t\t\tthat.getReservationAll() //重新渲染数据\r\n    \t\t\t\t\t}else if(res.result.status == 2){\r\n    \t\t\t\t\t\tthat.$confirm(res.result.msg, '提示', {\r\n                      type: 'warning'\r\n                 \t})\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}).catch(err =>{console.log(err)})\r\n    \t\t\t})\r\n    \t\t\t.catch(function(err){\r\n    \t\t\t\tconsole.log('Cancel')\r\n    \t\t\t})\r\n    \t\t} else {\r\n    \t\t\treturn false\r\n    \t\t}\r\n    \t})\r\n    },\r\n    //add 添加\r\n    submitForm(formName){\r\n        var that = this\r\n    \tthis.$refs[formName].validate((valid) =>{\r\n    \t\tif(valid){\r\n    \t\t\tvar params ={\r\n            \"name\": that.addForm.name,\r\n            \"title\":that.addForm.title,\r\n          }\r\n    \t\t\tthis.$confirm('是否确认提交',{\r\n    \t\t\t\tconfirmButtonText:'确定',\r\n    \t\t\t\tcancelButtonText:'取消',\r\n    \t\t\t\ttype:'warning',\r\n    \t\t\t\tcenter:true\r\n    \t\t\t})\r\n    \t\t\t.then(function(){\r\n    \t\t\t\t//ajax\r\n    \t\t\t\taddReservation_api(params).then(res =>{\r\n    \t\t\t\t\tif(res.status === 200){ //此处的表单验证\r\n    \t\t\t\t\t\tthat.dialogFormVisible = false\r\n    \t\t\t\t\t\tthat.getReservationAll() //重新渲染数据\r\n    \t\t\t\t\t}else{\r\n    \t\t\t\t\tthat.$confirm(res.result.msg, '提示', {\r\n                      type: 'warning'\r\n                 \t})\r\n    \t\t\t\t}\r\n    \t\t\t\t}).catch(err =>{console.log(err)})\r\n    \t\t\t})\r\n    \t\t\t.catch(function(err){\r\n    \t\t\t\tconsole.log('Cancel')\r\n    \t\t\t})\r\n    \t\t} else {\r\n    \t\t\treturn false\r\n    \t\t}\r\n    \t})\r\n    },\r\n\r\n    // delete\r\n    handleDelete (index, row) {\r\n        var _self = this\r\n        this.$confirm('确认删除吗? 删除之后,数据将不可恢复,请慎重选择！', '提示', {\r\n            confirmButtonText: '删除',\r\n            cancelButtonText: '我再想一下',\r\n            type: 'warning',\r\n            center: true\r\n              }).then(function() {\r\n            let params = {\r\n              ReserId:row.id\r\n            }\r\n        deleteReservation_api({data:params}).then(res => {\r\n        \tif(res.status == 200){\r\n        \t\t_self.$message({\r\n        \t\t  message: '删除成功',\r\n        \t\t  type: 'success'\r\n        \t  });\r\n        _self.getReservationAll() //重新渲染数据\r\n        \t}\r\n        }).catch(err =>{console.log(err)})\r\n    \t\t  }).catch(function(e) {\r\n    \t\t\t  if (e != 'cancel') { console.log('出现错误：' + e) }\r\n    \t\t  })\r\n      }\r\n  },\r\n  mounted() {\r\n\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.item {\r\n  margin-top: 10px;\r\n  margin-right: 40px;\r\n}\r\n.checking{\r\n  margin: 20px 0;\r\n  .codeName{\r\n    width: 12.5rem;margin-right: 10px;\r\n  }\r\n  .add{float: right;}\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n</style>\r\n"],"sourceRoot":"src/components/Book"}]}