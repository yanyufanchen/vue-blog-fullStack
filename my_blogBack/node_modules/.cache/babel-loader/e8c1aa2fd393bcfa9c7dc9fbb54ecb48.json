{"remainingRequest":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\src\\components\\Penalty\\DelayPenalty.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\src\\components\\Penalty\\DelayPenalty.vue","mtime":1578115302943},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangpeng\\Desktop\\mt\\vue-ht\\library\\my_library\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\wangpeng\\\\Desktop\\\\mt\\\\vue-ht\\\\library\\\\my_library\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAuthorAll, getAllBook, loanBook_api, getLoan_api, addLoan_api, updataLoan_api, deleteLoan_api, getPenalty_api, getPenaltyAll_api, updataPenalty_api } from '@/api';\nimport moment from 'moment'; // 时间过滤插件\n\nexport default {\n  data: function data() {\n    return {\n      pickerOptions0: {\n        disabledDate: function disabledDate(time) {\n          return time.getTime() < Date.now(); //如果没有后面的-8.64e7就是不可以选择今天的\n        }\n      },\n      common: ['delay penalty'],\n      // 公共组件传值\n      allCount: null,\n      tableData: [],\n      comName: [],\n      comTitle: [],\n      dialogFormVisible: false,\n      editFormVisible: false,\n      show: true,\n      addForm: {\n        name: '',\n        title: '',\n        dueDate: '',\n        BookId: '',\n        UserId: '',\n        id: ''\n      },\n      editRegion: {\n        delay_penalty: '',\n        condition: '',\n        id: ''\n      },\n      formLabelWidth: '140px',\n      rules: {}\n    };\n  },\n  created: function created() {\n    this.getDelayPenaltyAll();\n  },\n  methods: {\n    //获取所以罚款信息\n    getDelayPenaltyAll: function () {\n      var _getDelayPenaltyAll = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, penalty_res;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getPenaltyAll_api();\n\n              case 2:\n                _ref = _context.sent;\n                penalty_res = _ref.data;\n\n                if (!(penalty_res.status !== 200)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.$message.error(res.msg));\n\n              case 6:\n                this.tableData = penalty_res.data;\n                this.allCount = penalty_res.total;\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getDelayPenaltyAll() {\n        return _getDelayPenaltyAll.apply(this, arguments);\n      }\n\n      return getDelayPenaltyAll;\n    }(),\n    handleEdit: function handleEdit(index, row) {\n      this.editFormVisible = true;\n      this.editRegion = Object.assign({\n        delay_penalty: row.delay_penalty,\n        condition: row.condition,\n        PenaltyId: row.id\n      }); //这句是关键！！！\n    },\n    editSubmitRegion: function editSubmitRegion(formName) {\n      var _this = this;\n\n      var that = this;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          // var timestamp2 = Date.parse(new Date(that.editRegion.dueDate))\n          var params = {\n            penaltyNum: that.editRegion.delay_penalty,\n            penalty_id: that.editRegion.PenaltyId\n          };\n\n          _this.$confirm('Whether to commit', {\n            confirmButtonText: 'confirm',\n            cancelButtonText: 'cancel',\n            type: 'warning',\n            center: true\n          }).then(function () {\n            //ajax\n            updataPenalty_api(params).then(function (res) {\n              if (res.data.status == 200) {\n                that.editFormVisible = false;\n                that.getDelayPenaltyAll(); //重新渲染数据\n              } else {\n                that.$confirm(res.data.msg, 'hint', {\n                  type: 'warning'\n                });\n              }\n            }).catch(function (err) {\n              console.log(err);\n            });\n          }).catch(function (err) {\n            console.log('Cancel');\n          });\n        } else {\n          return false;\n        }\n      });\n    }\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["DelayPenalty.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 导航 -->\r\n    <Breadcrumb :value=\"common\"></Breadcrumb>\r\n    <el-card class=\"box-card\">\r\n      <!-- 逾期罚款管理 -->\r\n      <el-row class=\"checking\">\r\n        <!-- <el-col :span=\"18\">\r\n          <div class=\"grid-content bg-purple\">\r\n            <span class=\"com_title\">Borrower：</span>\r\n            <el-input\r\n              class=\"codeName\"\r\n              ref=\"com_name\"\r\n              size=\"small\"\r\n              placeholder=\"Please enter a borrower name\"\r\n              v-model=\"input1\"\r\n              clearable\r\n            ></el-input>\r\n            <span class=\"com_title\">Titles of books：</span>\r\n            <el-input\r\n              class=\"codeName\"\r\n              size=\"small\"\r\n              ref=\"com_name\"\r\n              placeholder=\"Please enter a title\"\r\n              v-model=\"value1\"\r\n              clearable\r\n            ></el-input>\r\n            <el-button type=\"info\" size=\"small\" @click=\"searchClick\">Query</el-button>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          \r\n        </el-col>-->\r\n      </el-row>\r\n      <el-table :data=\"tableData\" style=\"width: 100%\">\r\n        <el-table-column prop=\"id\" label=\"id\"></el-table-column>\r\n        <el-table-column prop=\"delay_penalty\" label=\"delay penalty(￥)\"></el-table-column>\r\n        <el-table-column prop=\"condition\" label=\"condition\"></el-table-column>\r\n        <el-table-column label=\"Operation\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" @click=\"handleEdit(scope.$index,scope.row)\">Extend</el-button>\r\n            <!-- <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\"\r\n            >Delete</el-button>-->\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-dialog title=\"edit delay penalty\" :visible.sync=\"editFormVisible\">\r\n        <el-form :model=\"editRegion\" :rules=\"rules\" ref=\"editRegion\">\r\n          <el-form-item label=\"delay penalty\" prop=\"delay_penalty\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"editRegion.delay_penalty\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"condition\" prop=\"condition\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"editRegion.condition\" :disabled=\"true\" autocomplete=\"off\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button size=\"small\" @click.native=\"editFormVisible = false\">cancel</el-button>\r\n          <el-button size=\"small\" type=\"info\" @click=\"editSubmitRegion('editRegion')\">confirm</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {getAuthorAll, getAllBook,loanBook_api,getLoan_api,addLoan_api,updataLoan_api,deleteLoan_api,getPenalty_api,getPenaltyAll_api,updataPenalty_api} from '@/api'\r\n  import moment from 'moment' // 时间过滤插件\r\nexport default {\r\n  data() {\r\n    return {\r\n      pickerOptions0: {\r\n        disabledDate(time) {\r\n          return time.getTime() < Date.now()//如果没有后面的-8.64e7就是不可以选择今天的\r\n       }\r\n      },\r\n      common: ['delay penalty'], // 公共组件传值\r\n      allCount:null,\r\n      tableData: [],\r\n      comName:[],\r\n      comTitle:[],\r\n      dialogFormVisible: false,\r\n      editFormVisible: false,\r\n      show:true,\r\n      addForm: {\r\n        name: '',\r\n        title: '',\r\n        dueDate: '',\r\n        BookId:'',\r\n        UserId:'',\r\n        id:'',\r\n      },\r\n      editRegion: {\r\n        delay_penalty: '',\r\n        condition: '',\r\n        id:'',\r\n      },\r\n      formLabelWidth: '140px',\r\n      rules: {}\r\n    }\r\n  },\r\n  created() {\r\n    this.getDelayPenaltyAll()\r\n  },\r\n  methods: {\r\n    //获取所以罚款信息\r\n    async getDelayPenaltyAll() {\r\n      const { data: penalty_res } = await getPenaltyAll_api()\r\n      if (penalty_res.status !== 200) return this.$message.error(res.msg)\r\n      this.tableData = penalty_res.data\r\n      this.allCount = penalty_res.total\r\n    },\r\n\t  handleEdit(index, row) {\r\n\t      this.editFormVisible = true;\r\n\t      this.editRegion = Object.assign({\r\n          delay_penalty: row.delay_penalty,\r\n          condition: row.condition,\r\n          PenaltyId:row.id\r\n          }); //这句是关键！！！\r\n\t  },\r\n\t  editSubmitRegion (formName) {\r\n\t  \tvar that = this\r\n\t  \tthis.$refs[formName].validate((valid) =>{\r\n\t  \t\tif(valid){\r\n          // var timestamp2 = Date.parse(new Date(that.editRegion.dueDate))\r\n          var params = {\r\n            penaltyNum: that.editRegion.delay_penalty,\r\n            penalty_id:that.editRegion.PenaltyId\r\n          }\r\n\t  \t\t\tthis.$confirm('Whether to commit',{\r\n\t  \t\t\t\tconfirmButtonText:'confirm',\r\n\t  \t\t\t\tcancelButtonText:'cancel',\r\n\t  \t\t\t\ttype:'warning',\r\n\t  \t\t\t\tcenter:true\r\n\t  \t\t\t})\r\n\t  \t\t\t.then(function(){\r\n\t  \t\t\t\t//ajax\r\n\t  \t\t\t\tupdataPenalty_api(params).then(res =>{\r\n\t  \t\t\t\t\tif(res.data.status == 200){\r\n\t  \t\t\t\t\t\tthat.editFormVisible = false\r\n\t  \t\t\t\t\t\tthat.getDelayPenaltyAll() //重新渲染数据\r\n\t  \t\t\t\t\t}else{\r\n\t  \t\t\t\t\t\tthat.$confirm(res.data.msg, 'hint', {\r\n\t                    type: 'warning'\r\n\t               \t})\r\n\t  \t\t\t\t\t}\r\n\t  \t\t\t\t}).catch(err =>{console.log(err)})\r\n\t  \t\t\t})\r\n\t  \t\t\t.catch(function(err){\r\n\t  \t\t\t\tconsole.log('Cancel')\r\n\t  \t\t\t})\r\n\t  \t\t} else {\r\n\t  \t\t\treturn false\r\n\t  \t\t}\r\n\t  \t})\r\n\t  },\r\n  },\r\n  mounted() {}\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.checking{\r\n  margin: 20px 0;\r\n  .codeName{\r\n    width: 12.5rem;margin-right: 10px;\r\n  }\r\n  .add{float: right;}\r\n}\r\n.page_size{display: inline-block;float: right;}\r\n</style>\r\n"],"sourceRoot":"src/components/Penalty"}]}