(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods"],{"02f4":function(e,t,a){var r=a("4588"),s=a("be13");e.exports=function(e){return function(t,a){var n,i,o=String(s(t)),l=r(a),c=o.length;return l<0||l>=c?e?"":void 0:(n=o.charCodeAt(l),n<55296||n>56319||l+1===c||(i=o.charCodeAt(l+1))<56320||i>57343?e?o.charAt(l):n:e?o.slice(l,l+2):i-56320+(n-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var r=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},"0a49":function(e,t,a){var r=a("9b43"),s=a("626a"),n=a("4bf8"),i=a("9def"),o=a("cd1c");e.exports=function(e,t){var a=1==e,l=2==e,c=3==e,u=4==e,d=6==e,m=5==e||d,p=t||o;return function(t,o,f){for(var h,b,g=n(t),v=s(g),y=r(o,f,3),x=i(v.length),_=0,w=a?p(t,x):l?p(t,0):void 0;x>_;_++)if((m||_ in v)&&(h=v[_],b=y(h,_,g),e))if(a)w[_]=b;else if(b)switch(e){case 3:return!0;case 5:return h;case 6:return _;case 2:w.push(h)}else if(u)return!1;return d?-1:c||u?u:w}}},"0bfb":function(e,t,a){"use strict";var r=a("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},1024:function(e,t,a){"use strict";var r=a("4f6b"),s=a.n(r);s.a},1169:function(e,t,a){var r=a("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"14e1":function(e,t,a){},"20d6":function(e,t,a){"use strict";var r=a("5ca1"),s=a("0a49")(6),n="findIndex",i=!0;n in[]&&Array(1)[n](function(){i=!1}),r(r.P+r.F*i,"Array",{findIndex:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},"214f":function(e,t,a){"use strict";a("b0c5");var r=a("2aba"),s=a("32e9"),n=a("79e5"),i=a("be13"),o=a("2b4c"),l=a("520a"),c=o("species"),u=!n(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var m=o(e),p=!n(function(){var t={};return t[m]=function(){return 7},7!=""[e](t)}),f=p?!n(function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[c]=function(){return a}),a[m](""),!t}):void 0;if(!p||!f||"replace"===e&&!u||"split"===e&&!d){var h=/./[m],b=a(i,m,""[e],function(e,t,a,r,s){return t.exec===l?p&&!s?{done:!0,value:h.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}}),g=b[0],v=b[1];r(String.prototype,e,g),s(RegExp.prototype,m,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},"28a5":function(e,t,a){"use strict";var r=a("aae3"),s=a("cb7c"),n=a("ebd6"),i=a("0390"),o=a("9def"),l=a("5f1b"),c=a("520a"),u=a("79e5"),d=Math.min,m=[].push,p="split",f="length",h="lastIndex",b=4294967295,g=!u(function(){RegExp(b,"y")});a("214f")("split",2,function(e,t,a,u){var v;return v="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[f]||2!="ab"[p](/(?:ab)*/)[f]||4!="."[p](/(.?)(.?)/)[f]||"."[p](/()()/)[f]>1||""[p](/.?/)[f]?function(e,t){var s=String(this);if(void 0===e&&0===t)return[];if(!r(e))return a.call(s,e,t);var n,i,o,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?b:t>>>0,g=new RegExp(e.source,u+"g");while(n=c.call(g,s)){if(i=g[h],i>d&&(l.push(s.slice(d,n.index)),n[f]>1&&n.index<s[f]&&m.apply(l,n.slice(1)),o=n[0][f],d=i,l[f]>=p))break;g[h]===n.index&&g[h]++}return d===s[f]?!o&&g.test("")||l.push(""):l.push(s.slice(d)),l[f]>p?l.slice(0,p):l}:"0"[p](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,r){var s=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,s,r):v.call(String(s),a,r)},function(e,t){var r=u(v,e,this,t,v!==a);if(r.done)return r.value;var c=s(e),m=String(this),p=n(c,RegExp),f=c.unicode,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),y=new p(g?c:"^(?:"+c.source+")",h),x=void 0===t?b:t>>>0;if(0===x)return[];if(0===m.length)return null===l(y,m)?[m]:[];var _=0,w=0,C=[];while(w<m.length){y.lastIndex=g?w:0;var k,P=l(y,g?m:m.slice(w));if(null===P||(k=d(o(y.lastIndex+(g?0:w)),m.length))===_)w=i(m,w,f);else{if(C.push(m.slice(_,w)),C.length===x)return C;for(var F=1;F<=P.length-1;F++)if(C.push(P[F]),C.length===x)return C;w=_=k}}return C.push(m.slice(_)),C}]})},"300e":function(e,t,a){},"3b0d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{value:e.common}}),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("el-button",{staticClass:"search_button",attrs:{type:"success"}},[e._v("添加分类")])],1),a("el-alert",{staticClass:"alert",attrs:{title:"注意：只允许为第三级分类设置相关参数！",type:"warning","show-icon":"",closable:!1}}),a("el-form",{ref:"goodscateFormRef",attrs:{"label-width":"110px"}},[a("el-form-item",{attrs:{label:"选择商品分类："}},[a("el-cascader",{staticStyle:{width:"20%"},attrs:{clearable:"",options:e.options,props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:e.handleChange},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户管理",name:"first"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isBtnDisablad},on:{click:function(t){e.addParamsVisible=!0}}},[e._v("添加参数")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manytableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e._l(t.row.attr_vals,function(r,s){return a("el-tag",{key:s,staticClass:"el-tag",attrs:{closable:"",type:"danger"},on:{close:function(a){return e.closeParams(t.row,r)}}},[e._v(e._s(r))])}),t.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return e.handleInputConfirm(t.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t.row)}},model:{value:e.addparamValue,callback:function(t){e.addparamValue=t},expression:"addparamValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showInput(t.row)}}},[e._v("+ New Tag")])],2)]}}])}),a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.editCateParamsName(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.deleteCateParams(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"配置管理",name:"second"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isBtnDisablad},on:{click:function(t){e.addParamsVisible=!0}}},[e._v("添加参数")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.onlytableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-tag",{staticClass:"el-tag",attrs:{closable:"",type:"danger"}},[e._v(e._s(t.row.attr_vals))])],1)]}}])}),a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"}},[e._v("删除")])]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:"添加"+e.titleText,visible:e.addParamsVisible,width:"45%","before-close":e.handleClose},on:{"update:visible":function(t){e.addParamsVisible=t}}},[a("el-form",{ref:"addParamsFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addParamsForm,"status-icon":"",rules:e.paramsrules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.titleText,prop:"paramsName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addParamsForm.paramsName,callback:function(t){e.$set(e.addParamsForm,"paramsName",t)},expression:"addParamsForm.paramsName"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addParamsVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCateParams}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑"+e.titleText,visible:e.editParamsVisible,width:"45%","before-close":e.handleClose},on:{"update:visible":function(t){e.editParamsVisible=t}}},[a("el-form",{ref:"editParamsFormRef",staticClass:"demo-ruleForm",attrs:{model:e.editParamsForm,"status-icon":"",rules:e.paramsrules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.titleText,prop:"attr_name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editParamsForm.attr_name,callback:function(t){e.$set(e.editParamsForm,"attr_name",t)},expression:"editParamsForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editParamsVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editCateParams}},[e._v("确 定")])],1)],1)],1)},s=[],n=(a("28a5"),a("ac6a"),a("7f7f"),a("96cf"),a("3b8d")),i=a("365c"),o=a("a341"),l={data:function(){return{common:["商品管理","分类参数"],selectedKeys:[],options:[],activeName:"first",manytableData:[],onlytableData:[],sel:"many",addparamValue:"",addParamsVisible:!1,editParamsVisible:!1,addParamsForm:{},editParamsForm:{attr_name:""},paramsrules:{paramsName:[{required:!0,message:"请输入参数名称",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}]}}},created:function(){this.getGoodsCateList()},computed:{isBtnDisablad:function(){return 3!==this.selectedKeys.length},titleText:function(){return"many"==this.sel?"动态参数":"only"==this.sel?"静态属性":void 0}},methods:{handleChange:function(e){this.selectedKeys.length>0?this.getattributes():(this.manytableData=[],this.onlytableData=[])},getGoodsCateList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["l"])();case 2:if(t=e.sent,a=t.data,200==a.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取商品分类列表失败"));case 6:this.$message.success("获取商品分类列表成功"),this.options=a.data;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleClick:function(e,t){"first"==e.name?this.sel="many":"second"==e.name&&(this.sel="only"),this.selectedKeys.length>0&&this.getattributes()},getattributes:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["o"])({id:this.selectedKeys[this.selectedKeys.length-1],sel:this.sel});case 2:if(t=e.sent,a=t.data,200==a.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取商品分类参数失败"));case 6:this.$message.success("获取商品分类参数成功"),a.data.forEach(function(e){e.inputVisible=!1,e.attr_vals.length>0?e.attr_vals=e.attr_vals.split(","):e.attr_vals=[]}),"many"==this.sel?this.manytableData=a.data:this.onlytableData=a.data;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addCateParams:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["b"])({attr_name:this.addParamsForm.paramsName,attr_sel:this.sel,id:this.selectedKeys[this.selectedKeys.length-1]});case 2:if(t=e.sent,a=t.data,201===a.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("添加商品分类参数失败"));case 6:this.$message.success("添加商品分类参数成功"),this.getattributes(),this.addParamsVisible=!1;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),editCateParamsName:function(e){this.editParamsVisible=!0,this.editParamsForm.attr_name=e.attr_name,this.editParamsForm.attrId=e.attr_id,this.editParamsForm.id=e.cat_id,this.editParamsForm.attr_sel=e.attr_sel,this.editParamsForm.attr_vals=e.attr_vals.join()},editCateParams:function(){var e=this;this.$refs.editParamsFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var r,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("修改失败"));case 2:return t.next=4,Object(i["g"])(e.editParamsForm);case 4:if(r=t.sent,s=r.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("修改商品分类参数失败"));case 8:e.$message.success("修改商品分类参数成功"),e.editParamsVisible=!1,e.getattributes();case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},deleteCateParams:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if(a=e.sent,"confirm"===a){e.next=5;break}return e.abrupt("return",this.$message.info("已经取消删除"));case 5:return e.next=7,Object(i["h"])({id:t.cat_id,attrid:t.attr_id});case 7:if(r=e.sent,s=r.data,200===s.meta.status){e.next=11;break}return e.abrupt("return",this.$message.error("删除商品分类参数失败"));case 11:this.$message.success("删除商品分类参数成功"),this.getattributes();case 13:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),showInput:function(e){var t=this;e.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.addparamValue.trim().length){e.next=4;break}return this.addparamValue="",t.inputVisible=!1,e.abrupt("return");case 4:t.attr_vals.push(this.addparamValue.trim()),this.addparamValue="",t.inputVisible=!1,Object(o["a"])(t).then(function(e){if(200!=e.meta.status)return a.$message.error("更新参数属性失败");a.$message.success("更新参数属性成功")});case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),closeParams:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var r,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if(r=e.sent,"confirm"===r){e.next=5;break}return e.abrupt("return",this.$message.info("已经取消删除"));case 5:t.attr_vals.pop(a),Object(o["a"])(t).then(function(e){if(200!==e.meta.status)return s.$message.error("删除参数属性失败");s.$message.success("删除参数属性成功")});case 7:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),handleClose:function(e){this.addParamsVisible=!1,this.editParamsVisible=!1}}},c=l,u=(a("7a61"),a("2877")),d=Object(u["a"])(c,r,s,!1,null,"f9ccf596",null);t["default"]=d.exports},"475b":function(e,t,a){"use strict";var r=a("300e"),s=a.n(r);s.a},"4f3e":function(e,t,a){"use strict";var r=a("89eb"),s=a.n(r);s.a},"4f6b":function(e,t,a){},"4f9b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{value:e.common}}),a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"","show-icon":"",closable:!1}}),a("el-steps",{attrs:{active:e.activeIndex-0,"align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"addGoodsFormref",staticClass:"demo-addGoodsForm",attrs:{model:e.addGoodsForm,"status-icon":"",rules:e.checkAddForm,"label-width":"100px","label-position":e.labelPosition}},[a("el-tabs",{attrs:{"tab-position":e.tabPosition,"before-leave":e.beforeTabLeave,stretch:!0},on:{"tab-click":e.getCateParams},model:{value:e.activeIndex,callback:function(t){e.activeIndex=t},expression:"activeIndex"}},[a("div",{staticStyle:{margin:"20px"}}),a("el-tab-pane",{staticClass:"from",attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:e.addGoodsForm.goods_name,callback:function(t){e.$set(e.addGoodsForm,"goods_name",t)},expression:"addGoodsForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",clearable:""},model:{value:e.addGoodsForm.goods_price,callback:function(t){e.$set(e.addGoodsForm,"goods_price",t)},expression:"addGoodsForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number",clearable:""},model:{value:e.addGoodsForm.goods_weight,callback:function(t){e.$set(e.addGoodsForm,"goods_weight",t)},expression:"addGoodsForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"number",clearable:""},model:{value:e.addGoodsForm.goods_number,callback:function(t){e.$set(e.addGoodsForm,"goods_number",t)},expression:"addGoodsForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类"}},[a("el-cascader",{staticStyle:{width:"20%"},attrs:{clearable:"",options:e.options,props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:e.handleChange},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},e._l(e.manyParams,function(t){return a("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name}},[a("el-checkbox-group",{model:{value:t.attr_vals,callback:function(a){e.$set(t,"attr_vals",a)},expression:"item.attr_vals"}},e._l(t.attr_vals,function(e,t){return a("el-checkbox",{key:t,attrs:{border:"",label:e}})}),1)],1)}),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},e._l(e.onlyParams,function(t,r){return a("el-form-item",{key:r,attrs:{label:t.attr_name}},[a("el-input",{model:{value:t.attr_vals[0],callback:function(a){e.$set(t.attr_vals,0,a)},expression:"item.attr_vals[0]"}})],1)}),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://127.0.0.1:8888/api/private/v1/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.uploadSuccess,"file-list":e.fileList,"list-type":"picture",headers:e.headerObj}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{model:{value:e.addGoodsForm.goods_introduce,callback:function(t){e.$set(e.addGoodsForm,"goods_introduce",t)},expression:"addGoodsForm.goods_introduce"}}),a("el-button",{staticClass:"btnAdd",attrs:{type:"primary"},on:{click:e.add}},[e._v("添加商品")])],1)],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.imgVisible,width:"30%"},on:{"update:visible":function(t){e.imgVisible=t}}},[a("img",{staticClass:"imgVisible",attrs:{src:e.previewPath,alt:""}})])],1)],1)},s=[],n=(a("20d6"),a("28a5"),a("ac6a"),a("96cf"),a("3b8d")),i=a("365c"),o=a("a341"),l=a("18d9"),c=(a("a753"),a("8096"),a("14e1"),a("60bb")),u=a.n(c),d={components:{quillEditor:l["quillEditor"]},data:function(){return{common:["商品管理","添加商品"],activeIndex:0,tabPosition:"left",addGoodsForm:{goods_name:"",goods_price:0,goods_weight:0,goods_number:0,goods_cat:[],pics:[],attrs:[],goods_introduce:""},selectedKeys:[],options:[],labelPosition:"top",checkAddForm:{goods_name:[{required:!0,message:"请输入参数名称",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}]},goodsParams:{id:"",sel:""},onlyParams:[],manyParams:[],fileList:[],headerObj:{Authorization:window.sessionStorage.getItem("token")},imgVisible:!1,previewPath:""}},methods:{handleClick:function(e,t){},beforeTabLeave:function(e,t){var a=!0;return"0"==t&&(this.$refs.addGoodsFormref.validate(function(e){e||(a=!1)}),this.selectedKeys.length<3&&(a=!1,this.$message.error("请选择商品分类列表"))),a},handleChange:function(){this.addGoodsForm.goods_cat=this.selectedKeys},getGoodsCateList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["l"])();case 2:if(t=e.sent,a=t.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取商品分类列表失败"));case 6:this.$message.success("获取商品分类列表成功"),this.options=a.data;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getCateParams:function(){var e=this;1==this.activeIndex?(this.goodsParams.sel="many",this.goodsParams.id=this.selectedKeys[this.selectedKeys.length-1]):2==this.activeIndex&&(this.goodsParams.sel="only",this.goodsParams.id=this.selectedKeys[this.selectedKeys.length-1]),1!=this.activeIndex&&2!=this.activeIndex||Object(o["b"])(this.goodsParams).then(function(t){if(200!==t.meta.status)return e.$message.error("获取参数属性失败");e.$message.success("获取参数属性成功"),t.data.forEach(function(e){e.attr_vals.length>0?e.attr_vals=e.attr_vals.split(","):e.attr_vals=[]}),"many"==e.goodsParams.sel?e.manyParams=t.data:e.onlyParams=t.data})},handleRemove:function(e){var t=e.response.data.tmp_path,a=this.addGoodsForm.pics.findIndex(function(e){return e.pic===t});this.addGoodsForm.pics.splice(a,1)},handlePreview:function(e,t){this.previewPath=e.response.data.url,this.imgVisible=!0},uploadSuccess:function(e,t,a){if(200!==e.meta.status)return this.$message.error("上传图片失败");this.$message.success("上传图片成功"),this.addGoodsForm.pics.push({pic:e.data.tmp_path})},add:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.addGoodsFormref.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(a){var r,s,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",t.$message.error("请填写完整的信息"));case 2:return r=u.a.cloneDeep(t.addGoodsForm),r.goods_cat=r.goods_cat.join(","),t.manyParams.forEach(function(e){r.attrs.push({attr_id:e.attr_id,attr_value:e.attr_vals.join(" ")})}),t.onlyParams.forEach(function(e){r.attrs.push({attr_id:e.attr_id,attr_value:e.attr_vals[0]})}),e.next=8,Object(i["c"])(r);case 8:if(s=e.sent,n=s.data,201===n.meta.status){e.next=12;break}return e.abrupt("return",t.$message.error("添加商品失败"));case 12:t.$message.success("添加商品成功"),t.$router.push("/goods");case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getGoodsCateList()},computed:{}},m=d,p=(a("4f3e"),a("2877")),f=Object(p["a"])(m,r,s,!1,null,"09dc756c",null);t["default"]=f.exports},"520a":function(e,t,a){"use strict";var r=a("0bfb"),s=RegExp.prototype.exec,n=String.prototype.replace,i=s,o="lastIndex",l=function(){var e=/a/,t=/b*/g;return s.call(e,"a"),s.call(t,"a"),0!==e[o]||0!==t[o]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(i=function(e){var t,a,i,u,d=this;return c&&(a=new RegExp("^"+d.source+"$(?!\\s)",r.call(d))),l&&(t=d[o]),i=s.call(d,e),l&&i&&(d[o]=d.global?i.index+i[0].length:t),c&&i&&i.length>1&&n.call(i[0],a,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(i[u]=void 0)}),i}),e.exports=i},"579e":function(e,t,a){},"5f1b":function(e,t,a){"use strict";var r=a("23c6"),s=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var n=a.call(e,t);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return s.call(e,t)}},"7a61":function(e,t,a){"use strict";var r=a("579e"),s=a.n(r);s.a},"7f7f":function(e,t,a){var r=a("86cc").f,s=Function.prototype,n=/^\s*function ([^ (]*)/,i="name";i in s||a("9e1e")&&r(s,i,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})},8096:function(e,t,a){},"89eb":function(e,t,a){},a341:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return i});a("96cf");var r=a("3b8d"),s=a("365c"),n=function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["o"])({id:t.id,sel:t.sel});case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["g"])({id:t.cat_id,attrId:t.attr_id,attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(",")});case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},a753:function(e,t,a){},aae3:function(e,t,a){var r=a("d3f4"),s=a("2d95"),n=a("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==s(e))}},ac6a:function(e,t,a){for(var r=a("cadf"),s=a("0d58"),n=a("2aba"),i=a("7726"),o=a("32e9"),l=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),m=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=s(p),h=0;h<f.length;h++){var b,g=f[h],v=p[g],y=i[g],x=y&&y.prototype;if(x&&(x[u]||o(x,u,m),x[d]||o(x,d,g),l[g]=m,v))for(b in r)x[b]||n(x,b,r[b],!0)}},b0c5:function(e,t,a){"use strict";var r=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},cb38:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{value:e.common}}),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("el-input",{staticStyle:{width:"30%"},attrs:{clearable:"",placeholder:"请输入内容"},on:{clear:e.searchGoods},model:{value:e.inputSearch,callback:function(t){e.inputSearch=t},expression:"inputSearch"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchGoods},slot:"append"})],1),a("el-button",{staticClass:"search_button",attrs:{type:"success"},on:{click:e.toAdd}},[e._v("添加商品")])],1),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableGoods,border:""}},[a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{type:"index",label:"#",width:"50"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",width:"600"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)",width:"80"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量",width:"80"}}),a("el-table-column",{attrs:{prop:"add_time",label:"创建时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.add_time)))]}}])}),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}})]}}])})],1)],a("el-pagination",{attrs:{background:"","current-page":e.queryInfo.pagenum,"page-sizes":[2,5,10,20],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2)],1)},s=[],n=(a("96cf"),a("3b8d")),i=a("365c"),o={data:function(){return{common:["商品管理","商品列表"],inputSearch:"",tableGoods:[],queryInfo:{query:"",pagenum:1,pagesize:10},currentPage:1,total:0}},methods:{toAdd:function(){this.$router.push("/goods/add")},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getGoods()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getGoods()},getGoods:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["m"])(this.queryInfo);case 2:if(t=e.sent,a=t.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取用户数据列表失败"));case 6:this.$message.success("获取用户数据列表成功"),this.tableGoods=a.data.goods,this.total=a.data.total;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),searchGoods:function(){this.queryInfo.query=this.inputSearch,this.getGoods()}},created:function(){this.getGoods()}},l=o,c=(a("475b"),a("2877")),u=Object(c["a"])(l,r,s,!1,null,"06d41b14",null);t["default"]=u.exports},cd1c:function(e,t,a){var r=a("e853");e.exports=function(e,t){return new(r(e))(t)}},e853:function(e,t,a){var r=a("d3f4"),s=a("1169"),n=a("2b4c")("species");e.exports=function(e){var t;return s(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!s(t.prototype)||(t=void 0),r(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}},fb9f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumb",{attrs:{value:e.common}}),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("el-button",{staticClass:"search_button",attrs:{type:"success"},on:{click:e.showCatedialogVisible}},[e._v("添加分类")])],1),a("tree-table",{attrs:{"index-text":"#",data:e.cateList,columns:e.columns,stripe:e.props.stripe,border:e.props.border,"show-header":e.props.showHeader,"show-summary":e.props.showSummary,"show-row-hover":e.props.showRowHover,"show-index":e.props.showIndex,"tree-type":e.props.treeType,"is-fold":e.props.isFold,"expand-type":e.props.expandType,"selection-type":e.props.selectionType},scopedSlots:e._u([{key:"valid",fn:function(e){return[e.row.cat_deleted?a("i",{staticClass:"el-icon-error",staticStyle:{color:"red","font-size":"16px"}}):a("i",{staticClass:"el-icon-success",staticStyle:{color:"#85ce61","font-size":"16px"}})]}},{key:"sort",fn:function(t){return[0==t.row.cat_level?a("el-tag",[e._v("一级")]):1==t.row.cat_level?a("el-tag",{attrs:{type:"success"}},[e._v("二级")]):a("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}},{key:"operation",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}})]}}])}),a("el-pagination",{attrs:{background:"","current-page":e.queryInfo.pagenum,"page-sizes":[2,5,10,20],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加分类",visible:e.CatedialogVisible,width:"40%","before-close":e.handleClose},on:{close:e.addCateClose,"update:visible":function(t){e.CatedialogVisible=t}}},[a("el-form",{ref:"cateFormRef",attrs:{model:e.addCateForm,rules:e.cateFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"cateName",label:"活动名称:"}},[a("el-input",{attrs:{placeholder:"请输入分类名称","prefix-icon":"iconfont icon-user"},model:{value:e.addCateForm.cateName,callback:function(t){e.$set(e.addCateForm,"cateName",t)},expression:"addCateForm.cateName"}})],1),a("el-form-item",{attrs:{label:"分类名称:"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"","change-on-select":"",options:e.options,props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:e.handleChange},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.CatedialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCateName}},[e._v("确 定")])],1)],1)],1)},s=[],n=(a("96cf"),a("3b8d")),i=a("365c"),o={data:function(){return{CatedialogVisible:!1,addCateForm:{cateName:""},cateFormRules:{cateName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}]},common:["商品管理","商品分类"],cateList:[],queryInfo:{pagenum:1,pagesize:5},total:0,props:{stripe:!1,border:!0,showHeader:!0,showSummary:!1,showRowHover:!1,showIndex:!0,treeType:!0,isFold:!0,expandType:!1,selectionType:!1},columns:[{label:"名称",prop:"cat_name",width:"300px"},{label:"是否有效",type:"template",template:"valid"},{label:"排序",type:"template",template:"sort"},{label:"操作",type:"template",template:"operation"}],selectedKeys:[],options:[],cateNameList:[]}},created:function(){this.getCategoriesList()},methods:{addCateClose:function(){this.$refs.cateFormRef.resetFields(),this.selectedKeys=[]},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCategoriesList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCategoriesList()},getCategoriesList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["l"])(this.queryInfo);case 2:if(t=e.sent,a=t.data,200==a.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取用户数据列表失败"));case 6:this.$message.success("获取用户数据列表成功"),this.cateList=a.data.result,this.total=a.data.total;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleClose:function(){this.CatedialogVisible=!1},showCatedialogVisible:function(){this.showGetCategoriesList(),this.CatedialogVisible=!0},handleChange:function(e){this.cateNameList=e},showGetCategoriesList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["l"])({type:2});case 2:if(t=e.sent,a=t.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取用户数据列表失败"));case 6:this.$message.success("获取用户数据列表成功"),this.options=a.data;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addCateName:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(""==this.addCateForm.cateName&&this.addCateForm.cateName<2)){e.next=2;break}return e.abrupt("return",this.$message.error("请填写正确的分类名称"));case 2:return t={},t.cat_name=this.addCateForm.cateName,this.cateNameList.length>0?(t.cat_pid=this.cateNameList[this.cateNameList.length-1],t.cat_level=this.cateNameList.length):this.cateNameList.length<=0&&(t.cat_pid=0,t.cat_level=0),e.next=7,Object(i["a"])(t);case 7:if(a=e.sent,r=a.data,201===r.meta.status){e.next=11;break}return e.abrupt("return",this.$message.error("添加分类失败"));case 11:this.$message.success("添加分类成功"),this.getCategoriesList(),this.CatedialogVisible=!1;case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},l=o,c=(a("1024"),a("2877")),u=Object(c["a"])(l,r,s,!1,null,"dfd9074a",null);t["default"]=u.exports}}]);
//# sourceMappingURL=goods.80ba9d69.js.map